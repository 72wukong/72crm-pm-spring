(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f80f28f"],{"010d":function(e,t,i){"use strict";i("6589")},"0611":function(e,t,i){},"0c3f":function(e,t,i){},2005:function(e,t,i){"use strict";i("c601")},"2ff1":function(e,t,i){"use strict";i("b204")},"444c":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"project-member"},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"项目与成员",disabled:""}}),e._v(" "),e._l(e.tabList,(function(t,n){return i("el-tab-pane",{key:n,attrs:{label:t.label,name:t.name}},[i("template",{slot:"label"},[0==n?i("span",{staticClass:"divider"}):e._e(),e._v("\n        "+e._s(t.label)+"\n      ")]),e._v(" "),i(t.name,{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"member",refInFor:!0,tag:"component",attrs:{"group-list":e.groupList,"group-options":e.groupOptions,"project-id":e.projectId},on:{getList:e.getGroupList}})],2)}))],2),e._v(" "),"Member"==e.activeName&&e.$auth("set.memberManage","PM")?i("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:e.newMemberBtn}},[e._v("添加成员")]):e._e(),e._v(" "),i("el-dialog",{ref:"wkDialog",attrs:{title:"添加成员",visible:e.newMemberVisible,"before-close":e.newMemberClose,"close-on-click-modal":!1,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.newMemberVisible=t}}},[i("div",[i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.addMember}},[e._v("添加成员")]),e._v(" "),i("wk-dep-user-dialog",{attrs:{radio:!1,disabled:!1,"user-value":e.dataValue,visible:e.visible,props:{showDept:!1,showDisableUser:e.config.showDisableUser,showUser:!e.config.disableUserList,disableUserList:e.config.disableUserList,disableUserLabel:e.config.disableUserLabel}},on:{"update:userValue":function(t){e.dataValue=t},"update:visible":function(t){e.visible=t},change:e.depUserDialogChange},nativeOn:{click:function(e){e.stopPropagation()}}}),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-table",class:e.WKConfig.tableStyle.class,staticStyle:{width:"100%"},attrs:{data:e.memberList,stripe:e.WKConfig.tableStyle.stripe,"highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"realname",label:"成员名称",width:"120px"}}),e._v(" "),i("el-table-column",{attrs:{label:"设置角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择角色"},model:{value:t.row.roleIds,callback:function(i){e.$set(t.row,"roleIds",i)},expression:"scope.row.roleIds"}},e._l(e.groupOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"role",label:"操作",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"0"},attrs:{type:"primary-text"},on:{click:function(i){e.deleteClick(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleConfirm(t)}}},[e._v("保存")]),e._v(" "),i("el-button",{nativeOn:{click:function(t){return e.newMemberClose(t)}}},[e._v("取消")])],1)])],1)},l=[],a=i("b85c"),o=(i("d3b7"),i("159b"),i("14d9"),i("a434"),i("a535")),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"base-info"},[i("div",{staticClass:"form-info"},[i("div",{staticClass:"info-left"},[i("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,disabled:!e.setAuth,"label-position":"top"}},[i("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[i("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"项目时间"}},[i("el-date-picker",{attrs:{align:"left",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"项目描述"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1),e._v(" "),e.setAuth?i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")]):e._e()],1)],1),e._v(" "),i("div",{staticClass:"info_cover"},[i("span",{staticClass:"title"},[e._v("项目封面")]),e._v(" "),i("div",{staticClass:"cover-photo"},[i("wk-ico-select",{staticStyle:{width:"100px",height:"100px"},attrs:{disabled:!e.setAuth,"icon-color":"#0052CC",title:"项目图标","hidden-color":"",placement:"bottom"},model:{value:e.iconCover,callback:function(t){e.iconCover=t},expression:"iconCover"}})],1)])]),e._v(" "),e.setAuth?i("div",[i("div",{staticClass:"bottom"},[i("h2",{staticClass:"title"},[e._v("归档项目")]),e._v(" "),i("p",{staticClass:"tips"},[e._v("归档项目后，将无法继续访问和操作该项目内的数据（里程碑、事项、事项关联关系等）， 关联项目可正常访问和操作")]),e._v(" "),i("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){e.click("file")}}},[e._v("归档")])],1),e._v(" "),i("div",{staticClass:"bottom"},[i("h2",{staticClass:"title"},[e._v("删除项目")]),e._v(" "),i("p",{staticClass:"tips"},[e._v("删除项目会删除项目内的数据（里程碑、事项、事项关联关系等数据），但不会删除关联项目数据")]),e._v(" "),i("el-button",{staticClass:"button",attrs:{type:"danger"},on:{click:function(t){e.click("delete")}}},[e._v("删除")])],1)]):e._e()])},r=[],c=(i("b0c0"),i("a4d3"),i("e01a"),i("8946")),u={name:"BaseInfo",components:{WkIcoSelect:c["a"]},props:{},data:function(){return{loading:!1,projectDetail:{},ruleForm:{name:"",time:[],description:""},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:1,max:31,message:"请输入1-31位的项目名称",trigger:"blur"}]},iconCover:{icon:"",color:"#EBECF0"}}},computed:{projectId:function(){return this.$route.params.setting},setAuth:function(){return this.$auth("set.editProjectInfo","PM")}},created:function(){this.getDetail()},methods:{getDetail:function(){var e=this;this.loading=!0,Object(o["r"])({projectId:this.projectId}).then((function(t){var i=t.data||{};e.projectDetail=i,i.startTime&&i.stopTime&&(e.ruleForm.time=[i.startTime.split(" ")[0],i.stopTime.split(" ")[0]]),e.iconCover.icon=i.icon,e.ruleForm.name=i.name||"",e.ruleForm.description=i.description||"",e.loading=!1})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.loading=!0;var t={projectId:this.projectId,name:this.ruleForm.name,description:this.ruleForm.description,startTime:this.ruleForm.time[0],stopTime:this.ruleForm.time[1],icon:this.iconCover.icon};Object(o["t"])(t).then((function(t){e.loading=!1,e.getDetail(),e.$message.success("保存成功")})).catch((function(){e.loading=!1}))},confirm:function(e){var t=this;return new Promise((function(i,n){t.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){i()})).catch((function(){n()}))}))},refresh:function(){this.$router.push({name:"participate"})},click:function(e){var t=this;"file"==e?this.confirm("确定要归档项目吗？").then((function(){t.loading=!0,Object(o["i"])({projectId:t.projectId,setType:2}).then((function(){t.$message.success("操作成功"),t.loading=!1,t.refresh()})).catch((function(){t.loading=!1}))})):"delete"==e&&this.confirm("确定要删除“".concat(this.projectDetail.name,"”项目吗，删除后，项目下的所有数据也将删除，且不可恢复！")).then((function(){t.loading=!0,Object(o["i"])({projectId:t.projectId,setType:3}).then((function(){t.loading=!1,t.$message.success("操作成功"),t.refresh()})).catch((function(){t.loading=!1}))}))}}},d=u,p=(i("f6ba"),i("2877")),f=Object(p["a"])(d,s,r,!1,null,"b7b05072",null),h=f.exports,m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"main-head"},[i("flexbox",{staticClass:"content-table-header"},[i("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入内容"},on:{blur:e.headerSearch},nativeOn:{keyup:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.headerSearch(t)}},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}},[i("el-button",{attrs:{slot:"suffix",type:"icon",icon:"wk wk-sousuo"},nativeOn:{click:function(t){return e.headerSearch(t)}},slot:"suffix"})],1),e._v(" "),i("span",{staticStyle:{margin:"0 15px"}},[e._v("角色")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.selectList},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.groupOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-table",class:e.WKConfig.tableStyle.class,staticStyle:{width:"100%"},attrs:{id:"examine-table",data:e.list,height:e.tableHeight,stripe:e.WKConfig.tableStyle.stripe,"highlight-current-row":""},on:{"row-click":e.handleRowClick}},[i("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"realname",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e.isEmpty(n.userId)?e._e():i("flexbox",{attrs:{align:"center",justify:"flex-start"}},[i("xr-avatar",{attrs:{id:n.userId,src:n.img,name:n.realname,size:24}}),e._v(" "),i("div",{staticStyle:{"padding-left":"10px"}},[e._v(e._s(n.realname))])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"group",label:"所属角色",formatter:e.formatter}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"0"},attrs:{type:"primary-text"},on:{click:function(i){e.handleClick("check",t)}}},[e._v("查看权限")]),e._v(" "),e.manageAuth&&e.editRoleAuth&&1!==t.row.isPmCreater?i("el-button",{staticStyle:{padding:"0"},attrs:{type:"primary-text"},on:{click:function(i){e.handleClick("associate",t)}}},[e._v("编辑角色")]):e._e(),e._v(" "),t.row.userId==e.userInfo.userId?i("el-button",{staticStyle:{padding:"0"},attrs:{type:"primary-text"},on:{click:function(i){e.handleClick("out",t)}}},[e._v("退出项目")]):e._e(),e._v(" "),t.row.userId!=e.userInfo.userId&&e.remove&&e.manageAuth?i("el-button",{staticStyle:{padding:"0"},attrs:{type:"primary-text"},on:{click:function(i){e.handleClick("remove",t)}}},[e._v("移除项目")]):e._e()]}}])})],1)],1),e._v(" "),e.editRoleDialogShow?i("relation-dialog",{attrs:{"selection-list":e.selectionList,visible:e.editRoleDialogShow,"group-list":e.groupList,"project-id":e.projectId,"user-id":e.userId},on:{"update:visible":function(t){e.editRoleDialogShow=t},change:e.getUserList}}):e._e(),e._v(" "),i("check-role-dialog",{attrs:{title:"成员权限","type-name":"成员",show:e.groupAuthShow,name:e.title,"rule-list":e.ruleList},on:{close:e.close}})],1)},b=[],v=i("5530"),g=(i("a9e3"),i("7db0"),i("4de4"),i("99af"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{ref:"wkDialog",attrs:{title:e.title,visible:e.show,"before-close":e.close,"append-to-body":!0,"close-on-click-modal":!1,width:"700px"},on:{"update:visible":function(t){e.show=t}}},[i("label",{staticClass:"label-title"},[e._v("当前"+e._s(e.typeName)+": "+e._s(e.name))]),e._v(" "),i("div",{staticStyle:{"margin-top":"8px"}},[i("el-table",{class:e.WKConfig.tableStyle.class,staticStyle:{width:"100%"},attrs:{data:e.ruleMenuList,stripe:e.WKConfig.tableStyle.stripe,"highlight-current-row":""}},e._l(e.tableList,(function(t,n){return i("el-table-column",{key:n,attrs:{prop:t.field,label:t.label,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){var l=n.row;return[["visit","list","check"].includes(t.field)?i("div",e._l(l[t.field],(function(t,n){return i("div",{key:n},[i("el-checkbox",{attrs:{disabled:!0},model:{value:t.check,callback:function(i){e.$set(t,"check",i)},expression:"v.check"}}),e._v(" "),i("span",[e._v(e._s(t.menuName))])],1)}))):"module"==t.field?i("span",[e._v(e._s(l[t.field]))]):e._e()]}}])})})))],1)])}),w=[],y=i("2909"),_=(i("d81d"),i("caad"),i("2532"),i("8d55")),k=i("9dba"),I={name:"CheckRoleDialog",components:{},mixins:[k["a"]],props:{title:{type:String,default:function(){return"角色权限"}},typeName:{type:String,default:function(){return"角色"}},name:{type:String,default:function(){return""}},show:Boolean,ruleList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,ruleMenuList:[],tableList:[{label:"模块",field:"module"},{label:"访问权限",field:"visit"},{label:"功能权限",field:"list"}]}},computed:{},watch:{show:{handler:function(e){e&&this.getRulesList(this.ruleList)}}},created:function(){},mounted:function(){},methods:{close:function(){this.$emit("close")},getRulesList:function(e){var t=this;this.loading=!0,Object(_["e"])(8).then((function(i){var n,l=i.data||{},o=l.data,s=o.childMenu,r=[],c=Object(a["a"])(s);try{for(c.s();!(n=c.n()).done;){var u=n.value;r.push({module:u.menuName,visit:t.getData(u.childMenu,2,e),list:t.getData(u.childMenu,1,e),check:!1})}}catch(d){c.e(d)}finally{c.f()}t.ruleMenuList=r,t.loading=!1})).catch((function(){t.loading=!1}))},getData:function(e,t,i){var n=e.filter((function(e){return e.projectType==t})).map((function(e){return e.check=!!i.includes(e.menuId),e}));return n},selectAll:function(e){var t=[].concat(Object(y["a"])(e.list),Object(y["a"])(e.visit));t.forEach((function(t){t.check=e.check}))}}},L=I,C=Object(p["a"])(L,g,w,!1,null,"dfb09886",null),j=C.exports,x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{ref:"wkDialog",attrs:{visible:e.visible,"append-to-body":!0,"close-on-click-modal":!1,width:"500px"},on:{close:e.close}},[i("div",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[e._v("\n    编辑角色\n  ")]),e._v(" "),i("el-form",{ref:"editRoleForm",attrs:{model:e.ruleForm,"label-width":"100px","label-position":"top"}},[i("el-form-item",{attrs:{label:"设置角色",prop:"roleList"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.selectList,callback:function(t){e.selectList=t},expression:"selectList"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})))],1)],1),e._v(" "),i("div",{}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.sureClick}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:e.close}},[e._v("取消")])],1)],1)},S=[],O={name:"RelationDialog",components:{},props:{selectionList:Array,groupList:Array,visible:{type:Boolean,required:!0,default:!1},projectId:[String,Number],userId:[String,Number]},data:function(){return{loading:!1,ruleForm:{roleList:[],userIds:[],deptIds:[]},options:[],selectList:[]}},computed:{},watch:{visible:{handler:function(e){this.selectList=this.selectionList},deep:!0,immediate:!0}},created:function(){this.getOptions()},methods:{getOptions:function(){var e,t=[],i=Object(a["a"])(this.groupList);try{for(i.s();!(e=i.n()).done;){var n=e.value;t.push({value:n.roleId,label:n.roleName})}}catch(l){i.e(l)}finally{i.f()}this.options=t},close:function(){this.$emit("update:visible",!1)},sureClick:function(){var e=this;this.$refs.editRoleForm.validate((function(t){if(!t)return!1;var i={projectId:e.projectId,roleIds:e.selectList,userId:e.userId};Object(o["b"])(i).then((function(t){e.$emit("change"),e.$message.success("编辑成功")})).catch((function(){}))}))}}},$=O,M=(i("010d"),Object(p["a"])($,x,S,!1,null,"2606852c",null)),D=M.exports,A=i("6bfe"),F=i("2f62"),N=i("8ed6"),U={name:"Member",components:{RelationDialog:D,CheckRoleDialog:j},props:{groupList:{type:Array,default:function(){return[]}},groupOptions:{type:Array,default:function(){return[]}},projectId:{type:[String,Number]}},data:function(){return{searchInput:"",options:[],value:"",loading:!1,tableHeight:document.documentElement.clientHeight-180-48,list:[],dataValue:[],selectionList:[],editRoleDialogShow:!1,userId:"",groupAuthShow:!1,title:"",ruleList:[]}},computed:Object(v["a"])(Object(v["a"])({config:function(){return Object(N["a"])({value:"userId",label:"realname",showDisableUser:!1,disableUserList:null,disableUserLabel:"停用员工"},this.props||{})}},Object(F["b"])(["userInfo"])),{},{remove:function(){var e,t=this;return null===(e=this.list.find((function(e){return e.userId==t.userInfo.userId})))||void 0===e?void 0:e.adminRoles.filter((function(e){return 1==e.label})).length},manageAuth:function(){return this.$auth("set.memberManage","PM")},editRoleAuth:function(){return this.$auth("set.memberPermissionsConfig","PM")}}),watch:{},created:function(){},mounted:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-180},this.getList()},methods:{isEmpty:function(e){return Object(A["b"])(e)},close:function(){this.groupAuthShow=!1},selectList:function(){this.getList()},getUserList:function(){this.getList(),this.editRoleDialogShow=!1},getList:function(){var e=this;this.loading=!0,Object(o["u"])({projectId:this.projectId,userName:this.searchInput,roleId:this.value}).then((function(t){e.list=t.data,e.loading=!1})).catch((function(){e.loading=!1}))},formatter:function(e,t){var i="";return e.adminRoles.forEach((function(e){i=i+e.roleName+"，"})),i.substr(0,i.length-1)},headerSearch:function(){this.refreshUserList()},refreshUserList:function(){this.getList()},handleRowClick:function(e,t,i){},unlink:function(e){for(var t=0;t<e.length;t++)for(var i=t+1;i<e.length;i++)e[t]==e[i]&&(e.splice(i,1),i--);return e},handleClick:function(e,t){var i=this;if("check"===e)Object(o["c"])({projectId:this.projectId,userId:t.row.userId}).then((function(e){i.ruleList=i.unlink(e.data),i.title=t.row.realname,i.groupAuthShow=!0}));else if("associate"===e)this.userId=t.row.userId,this.selectionList=[],t.row.adminRoles.forEach((function(e){i.selectionList.push(e.roleId)})),this.editRoleDialogShow=!0;else if("out"===e||"remove"===e){var n=null;this.userInfo.userId==t.row.userId&&(n="退出项目后，您将不能查看任何关于该项目的信息，如果想重新加入，请重新联系该项目管理员。"),this.$confirm("您确定要".concat(t.row.userId==this.userInfo.userId?"退出":"移除该成员","吗? ").concat(n||""),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.loading=!0,Object(o["a"])({projectId:i.projectId,userId:t.row.userId}).then((function(t){i.$message({type:"success",message:"操作成功"}),"out"===e&&i.$router.push({name:"participate"}),i.getList(),i.loading=!1})).catch((function(){i.loading=!1}))})).catch((function(){i.$message({type:"info",message:"已取消"})}))}}}},R=U,E=(i("2ff1"),Object(p["a"])(R,m,b,!1,null,"6be4a852",null)),T=E.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"main-head"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-table",class:e.WKConfig.tableStyle.class,staticStyle:{width:"100%"},attrs:{id:"examine-table",data:e.groupList,height:e.tableHeight,stripe:e.WKConfig.tableStyle.stripe,"highlight-current-row":""}},[i("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"roleName",label:"角色名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"num",label:"关联成员数"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"0"},attrs:{type:"primary-text"},on:{click:function(i){e.handleClick("check",t)}}},[e._v("查看权限")])]}}])})],1)],1),e._v(" "),i("check-role-dialog",{attrs:{title:"角色权限",show:e.groupAuthShow,name:e.title,"rule-list":e.ruleList},on:{close:e.close}})],1)},B=[],H={name:"UserGroup",components:{CheckRoleDialog:j},props:{groupList:{type:Array,default:function(){return[]}},projectId:{type:[String,Number]}},data:function(){return{loading:!1,groupAuthShow:!1,tableHeight:document.documentElement.clientHeight-180,title:"",ruleList:[]}},computed:{},watch:{},created:function(){},mounted:function(){var e=this;window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-180}},methods:{isEmpty:function(e){return Object(A["b"])(e)},handleClick:function(e,t){"check"===e&&(this.ruleList=t.row.rules||[],this.title=t.row.roleName,this.groupAuthShow=!0)},close:function(){this.groupAuthShow=!1}}},P=H,W=(i("9930"),Object(p["a"])(P,V,B,!1,null,"832774b0",null)),K=W.exports,G=i("2581"),z={name:"ProjectMember",components:{BaseInfo:h,Member:T,UserGroup:K,WkDepUserDialog:G["a"]},mixins:[k["a"]],data:function(){return{loading:!1,activeName:"BaseInfo",tabList:[{label:"基本信息",name:"BaseInfo"},{label:"成员",name:"Member"},{label:"角色",name:"UserGroup"}],groupList:[],newMemberVisible:!1,groupOptions:[],labelValue:"2",dataValue:[],visible:!1,memberList:[]}},computed:{projectId:function(){return this.$route.params.setting},config:function(){return Object(N["a"])({value:"userId",label:"realname",showDisableUser:!1,disableUserList:null,disableUserLabel:"停用员工"},this.props||{})}},mounted:function(){this.getGroupList()},methods:{handleClick:function(){},newMemberBtn:function(){"Member"==this.activeName&&(this.dataValue=[],this.memberList=[],this.newMemberVisible=!0)},newMemberClose:function(){this.newMemberVisible=!1},getGroupList:function(){var e=this;this.loading=!0,Object(o["d"])({projectId:this.projectId}).then((function(t){var i=t.data||[],n=[];e.groupList=i,e.groupList.forEach((function(e){n.push({label:e.roleName,value:e.roleId})})),e.groupOptions=n,e.loading=!1})).catch((function(){e.loading=!1}))},addMember:function(){this.visible=!0},depUserDialogChange:function(e,t,i,n){var l=this;this.$nextTick((function(){var e,t=[],n=Object(a["a"])(i);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.push({userId:o.userId,realname:o.realname,roleIds:[],projectId:l.projectId})}}catch(s){n.e(s)}finally{n.f()}l.memberList=t}))},deleteClick:function(e){this.memberList.splice(this.dataValue.indexOf(e.userId),1),this.dataValue.splice(this.dataValue.indexOf(e.userId),1)},handleConfirm:function(){var e=this;if(0==this.memberList.length)this.$message.error("请选择员工");else{var t=this.memberList;Object(o["v"])(t).then((function(t){e.newMemberClose(),e.$message.success("操作成功"),e.$nextTick((function(){e.$refs.member[1].getList()}))})).catch((function(){}))}}}},q=z,J=(i("2005"),Object(p["a"])(q,n,l,!1,null,"373f2516",null));t["default"]=J.exports},6589:function(e,t,i){},9930:function(e,t,i){"use strict";i("0c3f")},b204:function(e,t,i){},c601:function(e,t,i){},f6ba:function(e,t,i){"use strict";i("0611")}}]);