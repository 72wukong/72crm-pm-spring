(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b8055dba"],{"0cd3":function(t,e,a){},1557:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"status-tag"},[a("span",{staticClass:"status-name",style:t.getStyle},[t._v(t._s(t.name))])])},i=[],s=(a("a9e3"),{name:"StatusTag",props:{type:[String,Number],statusName:String},data:function(){return{group:["",{color:"#0052CC","background-color":"#DEEBFF"},{color:"#EC8205","background-color":"#FFEACF"},{color:"#006644","background-color":"#E3FCEF"}]}},computed:{convertType:function(){return Number(this.type)},name:function(){return this.statusName?this.statusName:["","未开始","进行中","已完成"][this.convertType]},getStyle:function(){return this.group[this.convertType]}},methods:{}}),o=s,r=(a("77bc"),a("2877")),l=Object(r["a"])(o,n,i,!1,null,"2a8a7a12",null);e["a"]=l.exports},"187e":function(t,e,a){},"3d28":function(t,e,a){},"5ab1":function(t,e,a){},"6ac0":function(t,e,a){"use strict";a("5ab1")},"6f13":function(t,e,a){"use strict";a("187e")},"6f2d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("xr-header",[a("template",{slot:"label"},[t._v("\n      状态设置\n      "),a("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{slot:"otherLabel","data-type":"24","data-id":"211"},slot:"otherLabel"})]),t._v(" "),a("el-button",{attrs:{slot:"ft",type:"primary"},on:{click:t.addStatus},slot:"ft"},[t._v("新建状态")])],2),t._v(" "),a("div",{staticClass:"main-body"},[a("flexbox",{staticClass:"content-table-header"},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入内容"},on:{blur:t.headerSearch},nativeOn:{keyup:function(e){return!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.headerSearch(e)}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[a("el-button",{attrs:{slot:"suffix",type:"icon",icon:"wk wk-sousuo"},nativeOn:{click:function(e){return t.headerSearch(e)}},slot:"suffix"})],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main-table",class:t.WKConfig.tableStyle.class,staticStyle:{width:"100%"},attrs:{id:"examine-table",data:t.list,height:t.tableHeight,stripe:t.WKConfig.tableStyle.stripe,"highlight-current-row":""}},[t._l(t.fieldList,(function(e,n){return a("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,"class-name":e.width>60?"column":"","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.row;return["statusType"==e.prop?a("status-tag",{attrs:{type:i.statusType}}):a("span",[t._v(t._s(i[e.prop]))])]}}])})})),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{padding:"0"},attrs:{disabled:2==e.row.label,type:"primary-text"},on:{click:function(a){t.handleClick("edit",e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticStyle:{padding:"0"},attrs:{disabled:5==e.row.roleType,type:"primary-text"},on:{click:function(a){t.handleClick("delete",e.row)}}},[t._v("删除")])]}}])})],2),t._v(" "),a("div",{staticClass:"p-contianer"},[a("el-pagination",{staticClass:"p-bar",attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,"pager-count":5,layout:"prev, pager, next, sizes, total, jumper"},on:{"update:pageSize":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("status-create",{attrs:{visible:t.createVisible,action:t.action},on:{"update:visible":function(e){t.createVisible=e},"save-success":t.handleRefresh,close:function(e){t.createVisible=!1}}})],1)},i=[],s=a("e04a"),o=a("1557"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t.dialogVisible?a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:t.dialogVisible,title:t.title,width:"480px","custom-class":"no-padding-dialog"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[a("div",{staticClass:"main"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},t._l(t.fieldList,(function(e,n){return a("el-form-item",{key:n,style:{width:e.width},attrs:{label:e.label,prop:e.field}},[a("template",{slot:"label"},[t._v("\n            "+t._s(e.label)+"\n            "),"select"==e.type?[a("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[t._v("状态类型是事项的状态所处的大阶段。")]),t._v(" "),a("div",[t._v("所有的事项都会经历未开始、进行中和")]),t._v(" "),a("div",[t._v("已完成三个大阶段。")])]),t._v(" "),a("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":"4","data-id":"9"}})])]:t._e()],2),t._v(" "),"txt"==e.type?a("el-input",{attrs:{placeholder:e.placeholder},model:{value:t.ruleForm[e.field],callback:function(a){t.$set(t.ruleForm,e.field,a)},expression:"ruleForm[item.field]"}}):"select"==e.type?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.placeholder},model:{value:t.ruleForm[e.field],callback:function(a){t.$set(t.ruleForm,e.field,a)},expression:"ruleForm[item.field]"}},t._l(t.options,(function(t){return a("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})}))):"textarea"==e.type?a("el-input",{attrs:{placeholder:e.placeholder,type:"textarea"},model:{value:t.ruleForm[e.field],callback:function(a){t.$set(t.ruleForm,e.field,a)},expression:"ruleForm[item.field]"}}):t._e()],2)}))),t._v(" "),a("div",{staticClass:"btn-wrap",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[t._v("保存")]),t._v(" "),a("el-button",{nativeOn:{click:function(e){return t.handleClose(e)}}},[t._v("取消")])],1)],1)]):t._e()],1)},l=[],c=a("5530"),u=(a("a4d3"),a("e01a"),{name:"CreateItem",components:{},props:{visible:{type:Boolean,required:!0,default:!1},action:{type:Object,default:function(){return{type:"save",data:null,id:""}}}},data:function(){return{loading:!1,dialogVisible:!1,fieldList:[{type:"txt",label:"状态名称",field:"statusName",placeholder:"请输入状态名称",width:"100%"},{type:"select",label:"状态类型",field:"statusType",placeholder:"请选择",width:"100%"},{type:"textarea",label:"描述",field:"description",placeholder:"对该状态的简要描述",width:"100%"}],ruleForm:{statusName:"",description:"",statusType:""},rules:{statusName:[{required:!0,message:"请输入状态名称",trigger:"blur"}],statusType:[{required:!0,message:"请输入状态名称",trigger:"change"}]},options:[{label:"未开始",key:1},{label:"进行中",key:2},{label:"已完成",key:3}]}},computed:{title:function(){return"".concat("save"==this.action.type?"新建":"编辑","事项状态")}},watch:{visible:{handler:function(t){this.initData(),this.dialogVisible=t},immediate:!0}},created:function(){},methods:{initData:function(){if("update"==this.action.type){var t=this.action.data||{};this.ruleForm={statusName:t.statusName,description:t.description,statusType:t.statusType}}else this.ruleForm={statusName:"",description:"",statusType:""}},handleClose:function(){this.dialogVisible=!1,this.$emit("update:visible",!1),this.$emit("close")},handleConfirm:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(e){t.loading=!0;var a=Object(c["a"])({},t.ruleForm);"update"==t.action.type&&(a.projectStatusId=t.action.id);var n={save:s["h"],update:s["k"]}[t.action.type];n(a).then((function(e){t.$emit("save-success",{type:t.itemType}),t.loading=!1})).catch((function(){t.loading=!1}))}}))}}}),d=u,p=(a("6ac0"),a("2877")),h=Object(p["a"])(d,r,l,!1,null,"27826754",null),f=h.exports,m=a("f468"),b=a("6bfe"),g=a("e297"),v=a.n(g),y={name:"SystemProject",components:{StatusCreate:f,StatusTag:o["a"],XrHeader:m["a"]},mixins:[],data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-250,list:[],searchInput:"",currentPage:1,pageSize:v.a.get("crmPageSizes")||15,pageSizes:[15,30,60,100],total:0,fieldList:[{prop:"statusName",label:"转改名称"},{prop:"statusType",label:"状态类型"},{prop:"description",label:"描述"}],action:{type:"save"},createVisible:!1}},computed:{},mounted:function(){var t=this;window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-180},this.getList()},methods:{isEmpty:function(t){return Object(b["b"])(t)},handleRefresh:function(){this.createVisible=!1,this.getList()},getList:function(){var t=this;this.loading=!0;var e={search:this.searchInput,page:this.currentPage,limit:this.pageSize};Object(s["j"])(e).then((function(e){t.list=e.data.list,e.data.totalRow&&Math.ceil(e.data.totalRow/t.pageSize)<t.currentPage&&t.currentPage>1?(t.currentPage=t.currentPage-1,t.getList()):(t.total=e.data.totalRow,t.loading=!1),t.$nextTick((function(){document.querySelector(".el-table__body-wrapper").scrollTop=1})),t.loading=!1})).catch((function(){t.loading=!1}))},handleSizeChange:function(t){v.a.set("crmPageSizes",t),this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()},addStatus:function(){this.action={type:"save",date:null,id:""},this.createVisible=!0},handleClick:function(t,e){var a=this;"edit"==t?(this.action={type:"update",data:e,id:e.projectStatusId},this.createVisible=!0):"delete"==t&&this.$confirm("您确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["i"])({projectStatusId:e.projectStatusId}).then((function(t){a.getList(),a.$message({type:"success",message:"操作成功"})})).catch((function(){}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},headerSearch:function(){this.getList()}}},S=y,_=(a("be6a"),Object(p["a"])(S,n,i,!1,null,"17dbaca6",null));e["default"]=_.exports},"77bc":function(t,e,a){"use strict";a("0cd3")},be6a:function(t,e,a){"use strict";a("3d28")},e04a:function(t,e,a){"use strict";a.d(e,"h",(function(){return i})),a.d(e,"k",(function(){return s})),a.d(e,"j",(function(){return o})),a.d(e,"i",(function(){return r})),a.d(e,"g",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"f",(function(){return d})),a.d(e,"b",(function(){return p})),a.d(e,"c",(function(){return h})),a.d(e,"l",(function(){return f})),a.d(e,"a",(function(){return m})),a.d(e,"m",(function(){return b}));var n=a("b775");function i(t){return Object(n["a"])({url:"projectStatus/add",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}function s(t){return Object(n["a"])({url:"projectStatus/update",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}function o(t){return Object(n["a"])({url:"projectStatus/queryProjectStatusList",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}function r(t){return Object(n["a"])({url:"projectStatus/delete",method:"post",data:t})}function l(t){return Object(n["a"])({url:"projectEvent/queryEventList",method:"post",data:t})}function c(t){return Object(n["a"])({url:"projectEventStatus/add",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}function u(t){return Object(n["a"])({url:"projectEventStatus/remove",method:"post",data:t})}function d(t){return Object(n["a"])({url:"projectEventStatus/applicationSchemeStatusList",method:"post",data:t})}function p(t){return Object(n["a"])({url:"projectEventStatus/list",method:"post",data:t})}function h(t){return Object(n["a"])({url:"projectEventStatus/transferStatus",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}function f(t){return Object(n["a"])({url:"projectEventStatus/updateInitStatus",method:"post",data:t})}function m(t){return Object(n["a"])({url:"projectEventStatus/giveUpApplicationScheme",method:"post",data:t})}function b(t){return Object(n["a"])({url:"projectEventStatus/updateSorting",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}},f468:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("flexbox",{staticClass:"xr-header"},[t.iconClass?a("div",{staticClass:"xr-header__icon",style:{backgroundColor:t.iconColor}},[a("i",{class:t.iconClass})]):t._e(),t._v(" "),a("div",{staticClass:"xr-header__label"},[t.$slots.label?t._t("label"):[t._v(t._s(t.label)),t._t("otherLabel")]],2),t._v(" "),t.showSearch?a("el-input",t._b({staticClass:"xr-header__search",style:{"margin-top":t.ftTop},attrs:{placeholder:t.placeholder},on:{input:t.inputChange},nativeOn:{keyup:function(e){return!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchClick(e)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},"el-input",t.inputAttr,!1),[a("el-button",{attrs:{slot:"suffix",type:"icon",icon:"wk wk-sousuo"},on:{click:t.searchClick},slot:"suffix"})],1):t._e(),t._v(" "),a("div",{staticClass:"xr-header__ft",style:{top:t.ftTop}},[t._t("ft")],2)],1)},i=[],s=(a("a9e3"),a("ac1f"),a("841c"),{name:"XrHeader",components:{},props:{iconClass:[String,Array],iconColor:String,label:String,showSearch:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入内容"},ftTop:{type:String,default:"0"},content:[String,Number],inputAttr:{type:Object,default:function(){}}},data:function(){return{search:""}},computed:{},watch:{content:{handler:function(){this.search!=this.content&&(this.search=this.content)},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{inputChange:function(){this.$emit("update:content",this.search)},searchClick:function(){this.$emit("search",this.search)}}}),o=s,r=(a("6f13"),a("2877")),l=Object(r["a"])(o,n,i,!1,null,"7eb05d11",null);e["a"]=l.exports}}]);