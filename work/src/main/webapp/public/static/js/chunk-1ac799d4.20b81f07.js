(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ac799d4"],{"041c":function(t,e,a){},"0cd3":function(t,e,a){},1019:function(t,e,a){"use strict";a("8067")},1557:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"status-tag"},[a("span",{staticClass:"status-name",style:t.getStyle},[t._v(t._s(t.name))])])},s=[],i=(a("a9e3"),{name:"StatusTag",props:{type:[String,Number],statusName:String},data:function(){return{group:["",{color:"#0052CC","background-color":"#DEEBFF"},{color:"#EC8205","background-color":"#FFEACF"},{color:"#006644","background-color":"#E3FCEF"}]}},computed:{convertType:function(){return Number(this.type)},name:function(){return this.statusName?this.statusName:["","未开始","进行中","已完成"][this.convertType]},getStyle:function(){return this.group[this.convertType]}},methods:{}}),o=i,r=(a("77bc"),a("2877")),c=Object(r["a"])(o,n,s,!1,null,"2a8a7a12",null);e["a"]=c.exports},1658:function(t,e,a){"use strict";a.d(e,"W",(function(){return s})),a.d(e,"qb",(function(){return i})),a.d(e,"N",(function(){return o})),a.d(e,"U",(function(){return r})),a.d(e,"P",(function(){return c})),a.d(e,"O",(function(){return l})),a.d(e,"H",(function(){return d})),a.d(e,"I",(function(){return u})),a.d(e,"G",(function(){return p})),a.d(e,"T",(function(){return h})),a.d(e,"R",(function(){return m})),a.d(e,"V",(function(){return f})),a.d(e,"Q",(function(){return b})),a.d(e,"S",(function(){return k})),a.d(e,"F",(function(){return g})),a.d(e,"K",(function(){return v})),a.d(e,"h",(function(){return T})),a.d(e,"e",(function(){return y})),a.d(e,"g",(function(){return C})),a.d(e,"D",(function(){return w})),a.d(e,"b",(function(){return j})),a.d(e,"y",(function(){return _})),a.d(e,"B",(function(){return D})),a.d(e,"z",(function(){return I})),a.d(e,"A",(function(){return L})),a.d(e,"x",(function(){return O})),a.d(e,"v",(function(){return x})),a.d(e,"d",(function(){return A})),a.d(e,"E",(function(){return S})),a.d(e,"u",(function(){return U})),a.d(e,"a",(function(){return P})),a.d(e,"f",(function(){return F})),a.d(e,"w",(function(){return N})),a.d(e,"M",(function(){return E})),a.d(e,"J",(function(){return H})),a.d(e,"gb",(function(){return B})),a.d(e,"nb",(function(){return R})),a.d(e,"fb",(function(){return W})),a.d(e,"pb",(function(){return q})),a.d(e,"hb",(function(){return $})),a.d(e,"jb",(function(){return V})),a.d(e,"ob",(function(){return M})),a.d(e,"ib",(function(){return Y})),a.d(e,"lb",(function(){return J})),a.d(e,"kb",(function(){return G})),a.d(e,"mb",(function(){return z})),a.d(e,"Y",(function(){return K})),a.d(e,"bb",(function(){return X})),a.d(e,"L",(function(){return Q})),a.d(e,"ab",(function(){return Z})),a.d(e,"Z",(function(){return tt})),a.d(e,"X",(function(){return et})),a.d(e,"cb",(function(){return at})),a.d(e,"eb",(function(){return nt})),a.d(e,"db",(function(){return st})),a.d(e,"r",(function(){return it})),a.d(e,"i",(function(){return ot})),a.d(e,"l",(function(){return rt})),a.d(e,"k",(function(){return ct})),a.d(e,"j",(function(){return lt})),a.d(e,"s",(function(){return dt})),a.d(e,"t",(function(){return ut})),a.d(e,"q",(function(){return pt})),a.d(e,"o",(function(){return ht})),a.d(e,"n",(function(){return mt})),a.d(e,"p",(function(){return ft})),a.d(e,"m",(function(){return bt})),a.d(e,"C",(function(){return kt})),a.d(e,"c",(function(){return gt})),a.d(e,"rb",(function(){return vt}));a("99af"),a("d3b7"),a("159b"),a("b64b");var n=a("b775");function s(t){return Object(n["a"])({url:"projectTask/saveProjectTask",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function i(t){return Object(n["a"])({url:"projectTask/updateProjectTask",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(t){return Object(n["a"])({url:"projectTask/deleteTask/".concat(t.taskId),method:"post"})}function r(t){return Object(n["a"])({url:"projectTask/queryProjectPlanTaskList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function c(t){return Object(n["a"])({url:"projectFieldSort/list",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(t){return Object(n["a"])({url:"projectFieldSort/addOrUpdate",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function d(t){return Object(n["a"])({url:"projectTask/setProjectTaskName",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(t){return Object(n["a"])({url:"projectTask/updateProjectTaskTime",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(t){return Object(n["a"])({url:"projectTask/setProjectTaskDescription",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function h(t){return Object(n["a"])({url:"projectTask/queryProjectIterationTaskList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(t){return Object(n["a"])({url:"projectTask/queryProjectTaskList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(t){return Object(n["a"])({url:"projectTask/queryUserTaskList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(t){return Object(n["a"])({url:"projectTask/getProjectTaskDetails/".concat(t.taskId),method:"post"})}function k(t){return Object(n["a"])({url:"projectTask/queryProjectTaskChildList",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function g(t){return Object(n["a"])({url:"projectTask/setProjectTaskMainUser",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function v(t){return Object(n["a"])({url:"projectTask/startBelongIteration",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function T(t){return Object(n["a"])({url:"projectTask/stopBelongIteration",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function y(t){return Object(n["a"])({url:"projectTask/belongIterationDel/".concat(t.taskId),method:"post"})}function C(t){return Object(n["a"])({url:"projectTask/belongIterationDetails/".concat(t.taskId),method:"post"})}function w(t){return Object(n["a"])({url:"projectBelongIteration/relevancyBelongIteration",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function j(t){return Object(n["a"])({url:"projectTaskTime/addProjectTaskTime",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function _(t){return Object(n["a"])({url:"projectBoardTask/queryBoardList",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function D(t){return Object(n["a"])({url:"projectTask/queryProjectTaskChildBoardList",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function I(t){return Object(n["a"])({url:"projectBoard/queryBoardList",method:"post",data:t})}function L(t){return Object(n["a"])({url:"projectBoard/resetBoard",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function O(t){return Object(n["a"])({url:"projectBoard/notAddStatus",method:"post",data:t})}function x(t){return Object(n["a"])({url:"projectTaskComment/queryCommentList",method:"post",data:t})}function A(t){return Object(n["a"])({url:"projectTaskComment/deleteComment",method:"post",data:t})}function S(t){return Object(n["a"])({url:"projectTaskComment/setComment",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function U(t){return Object(n["a"])({url:"projectTaskLog/queryTaskLog/".concat(t.taskId,"/").concat(t.type),method:"post"})}function P(t){return Object(n["a"])({url:"projectLabel/add",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function F(t){return Object(n["a"])({url:"projectLabel/delete",method:"post",data:t})}function N(t){return Object(n["a"])({url:"projectLabel/queryList",method:"post",data:t})}function E(t){return Object(n["a"])({url:"projectLabel/update",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function H(t){return Object(n["a"])({url:"projectLabel/updateTaskLabel",method:"post",data:t})}function B(t){return Object(n["a"])({url:"workTask/deleteWorkTask/".concat(t),method:"post"})}function R(t){return Object(n["a"])({url:"workTask/setWorkTaskStatus",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function W(t){return Object(n["a"])({url:"workTask/setWorkChildTaskStatus",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function q(t){return Object(n["a"])({url:"workTask/setWorkTaskTitle",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function $(t){return Object(n["a"])({url:"workTask/setWorkTaskDescription",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function V(t){return Object(n["a"])({url:"workTask/setWorkTaskMainUser",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function M(t){return Object(n["a"])({url:"workTask/setWorkTaskTime",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function Y(t){return Object(n["a"])({url:"workTask/setWorkTaskLabel",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function J(t){return Object(n["a"])({url:"workTask/setWorkTaskOwnerUser",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function G(t){return Object(n["a"])({url:"workTask/deleteWorkTaskOwnerUser",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function z(t){return Object(n["a"])({url:"workTask/setWorkTaskPriority",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function K(t){return Object(n["a"])({url:"projectTask/setPriority",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function X(t){return Object(n["a"])({url:"projectTask/setProjectWrongType",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function Q(t){return Object(n["a"])({url:"projectTask/upLoadFileRelationLog",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function Z(t){return Object(n["a"])({url:"projectTask/setProjectChildTask",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function tt(t){return Object(n["a"])({url:"projectTask/setProgress",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function et(t){return Object(n["a"])({url:"projectTask/setEstimatedManHours",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function at(t){return Object(n["a"])({url:"workTask/addWorkChildTask",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function nt(t){return Object(n["a"])({url:"workTask/updateWorkChildTask",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function st(t){return Object(n["a"])({url:"workTask/deleteWorkChildTask/".concat(t),method:"post"})}function it(t){return Object(n["a"])({url:"projectBoardTask/setTaskStatus",method:"post",data:t})}function ot(t){return Object(n["a"])({url:"projectTask/getProjectByTime",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function rt(t){return Object(n["a"])({url:"projectTask/getTaskByTime",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function ct(t){return Object(n["a"])({url:"projectTask/getTaskBurnout",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function lt(t){return Object(n["a"])({url:"projectTask/getProjectTaskEvent",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function dt(t){return Object(n["a"])({url:"projectTask/relevancyRelatedDemand",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function ut(t){return Object(n["a"])({url:"projectTask/setProjectChildTaskStatus",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function pt(t){return Object(n["a"])({url:"projectTask/downloadExcel",method:"post",data:t,responseType:"blob"})}function ht(t){var e=new FormData;return Object.keys(t).forEach((function(a){e.append(a,t[a])})),Object(n["a"])({url:"projectTask/excelImport",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"},timeout:6e4})}function mt(t){return Object(n["a"])({url:"projectTask/downloadErrorExcel",method:"post",data:t,responseType:"blob"})}function ft(t){return Object(n["a"])({url:"projectTask/projectTaskExportColumn",method:"post",data:t})}function bt(t){return Object(n["a"])({url:"projectTask/projectTaskExport",method:"post",data:t,responseType:"blob",headers:{"Content-Type":"application/json;charset=UTF-8"}})}function kt(t){return Object(n["a"])({url:"projectTaskUser/relatedProjectTaskUser",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function gt(t){return Object(n["a"])({url:"projectTask/sort/backlog",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function vt(t){return Object(n["a"])({url:"projectTask/queryUserTaskCount",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}},"212b":function(t,e,a){},2796:function(t,e,a){"use strict";a("4d91")},"2a91":function(t,e,a){"use strict";a("71fa")},"397a":function(t,e,a){},4213:function(t,e,a){"use strict";a("212b")},"432b":function(t,e,a){"use strict";a("397a")},"4d91":function(t,e,a){},"50cf":function(t,e,a){"use strict";a("8f79")},"5a4a":function(t,e,a){"use strict";a("041c")},6894:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAABYlAAAWJQFJUiTwAAAFAklEQVR4nO2bT0wUVxzHP7sQFljAEv4EOehJxaagtNaFSJomstaakIaQkkgltmnTepJD02vVc1NTbvZgWku1CQkhjYlR4dADCeA/WiBA483DSgSLCusCgaWH326K23nDvNnZWWH5JJuQfcPvfee7M2/e/H7veVjH2kwoG2gH2oB3gGK2BnPAfeAa0OUpq1yJN3jif6zNhKqAHuBN1+W5ywTQ4imrnIKYAbGTHwTeSJ8uV3kG1HvKKqc8scv+L7b+L5/IBHDAi9zzmXbyIOfc7kUGvEylzbM2E/qHrTPa6zLnJXNPHqDYm24F6SbjDch2vcfFl/AkBAvPYWlRvvPlQsEOKK+E3HxX5aTegOUlGLsDUyPyeTptfnxJBVTVyqf6MOT4UirPszYTWktJ5NnH0N8Lw/2wFLEXw5cHgUZobIbSnc7qi+G8AeF5uN4FAzcguupMTG8WNJyApnbwFzoTM4azBowOw6+dsDDnWMhXKCiGUx1QE3AspDMGRKPw+xXo63ZAkgWCrfDRafAm/xBL3oDVFbjyPdz7I2kxWhx6H05/DVnJjePJ/Xc0av3ks3OgOgD7a2H3Xigph/zY/RwJw+w0PHoIkyMwOgQry+bx4n1++k1SV0JyV0DvTxtf9v4iONoC73343wlvRCQMAzfhdjeEX5gfG2yF5s+sxTXAvgGjw3DpvPkxgSC0fAEFRba6IDwPPZdh6Jb5cWfO2x4Y7RkQnocLX6lHe48H2s7CkeO2RP2PwT642ql+rBYUw7kfbT0i7d0817vMT/7Lb507eYD6IJw5J/MBIxbmRJMN9A2YfSyTHBVtZ+FAnS0xprz1LnzSoW4fuCHaNNE3oL9XfSkGgs7+8onUB6HuA+O26Kpo00TPgOUlmdsb4S+SAS/VtHwufRkx3C8aNdAzYOyO+sXmaIv90V4HfyEcazVuW4qIRg30DJgaMf4+O0ee827RcFz6NGLygVYoZwyoDlif5DhBnh9qFAPt339qhbJuwOJLdTJjf61Wp46g6vPptGi1iHUDnoTUbbv3Wg7jGLv2qNvMtCZg3YCF5+q2knLLYRyjtELdZqY1AesGxBOYRrh5/8fJ86vbzLQmkPFpcesG+HLVbZGwA1I0MevTTGsC1g0o2KFum90g1Z0KzPo005qAdQPKK9Vtjx5aDuMYZn2aaU3AugG5+VK0MGJSMUFKJao+Syq0qkt6g2CVYvIxOuTuOBAJS59G7DuoFcoZA1aWJYfnFgM31UnT/W9rhdIzoPqwlKuMuN0tqbJUE56Xvozw5YlGDfQMyPFJrc5Q2AtJYKaansvqTHGgUbuYqj8RamxW5+aGbkkCM1UM9qkzxN4s0aaJvgGlO6VQqeJqJ4zf1Q67IeN3JbaKhhO2Ksj2psJN7ZKKNiK6CpcuOHslDPZJTLO0eFO7rdD2DPAXSpVWRXQVui7CLz8kNzCG5yVG10XzUvupDttlc3dKY8daJY1l9ga3nk1RGgMpjv78nfXiaE2dZHJ27ZH3+bghdoqjIBXitBZHYdOXx7cXSGwvkdleJLW9TC41BsSJL5ScfCBFCysLJfcdlLe6Tb1QUsVrtlTWfQNeM7bT4ukWkG68yKbCTGXOC9xLt4o0ct8L/JZuFWnkWnzj5BhQlW41LiMbJ2MbiT8GNnjx3lI8Q/YPr3gBPGWV48ARYCqdqlxigti+YVi3exxe2T5/EjjE1tlTqNw+/y9M0diegvOS1gAAAABJRU5ErkJggg=="},7078:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return i}));a("d3b7"),a("159b"),a("b64b");var n=a("b775");function s(t){return Object(n["a"])({url:"hrmEmployee/queryInEmployeeList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function i(t){return Object(n["a"])({url:"hrmEmployee/queryDeptEmployeeList/".concat(t),method:"post"})}},7195:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return i}));var n=a("b775");function s(t){return Object(n["a"])({url:"/hrmEmployee/queryInspectionDeptEmployeeList/".concat(t),method:"post",data:t})}function i(t){return Object(n["a"])({url:"hrmEmployee/queryInspectionAllEmployeeList",method:"post",data:t})}},"71fa":function(t,e,a){},"77bc":function(t,e,a){"use strict";a("0cd3")},8067:function(t,e,a){},86906:function(t,e,a){"use strict";a("b07b")},"8f79":function(t,e,a){},"94dd":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAABYlAAAWJQFJUiTwAAAELklEQVR4nO2bTWwbRRiGn93sOnY3TeLEdV27KVB+FJWKklIQpQogAQdQDygIAUEBDqWnSpwQ4siVnpCQkCouKCItSCAuXBBIoABVEakKrSILVNQUYpI0sZ0Ex4l3Y3NwIoXu2jOo8Y5k73OKZr/NvPPueMb+Zj+NLWTsigGMAMPAA0CU5iAHTABjwGjS1JzNC9rmHxm70g98BhzwXZ6/TALPJU0tDRsGbAz+PNCtTpev5IGjSVNLaxvT/hea/8nfzCRwSKf6mW+1wUN1zCM61QWvVRnWMnYlS/Os9v+XnJaxKxXVKlSiqxagmsAA1QJUExigWoBqDNnAcqXC97PLXMwVWbbXiYdNjsUsDvbsaKS+hiO1Dc6slHj71wxfFUqua6/v6uCtexNE2mpPpqJT5svpPBcWCuSd8q0pFhAz23g03sFTe7owdE0YLzRgxSnzyoUpzq/aNWNOxCzeOZTyvJZdczg18RffFd3mNZKhrjDvDuyt+2BAYg344nqu7uABPpwvcGlhxfPae+lZ3wcP8PniKh9dnRfGCQ34Zm5ZqsPxG+643JrDx/MFqfsbwWhmibLgAy40IL3qiEIA+NtjlswUbYpSdzeGa+tlcqX6s1doQMJok+qsy3THdXq0+UkE6DTrb3RCAx7piUh1djjq3g6TVognrZDU/Y1guNfCFOwEQgNevC1KXPBPBiMGjyc6Xe0a8OY9cXo18Xa03ew3dE7eHRPGCQ1IWe28fyBR04SBkMHp+1I1nT7Ys4NPD/fxQrfcTLpVDK26LZ870sdeq10YL50P+POfNcamsoxni1y2HR5sN3lmdwdD+6J0h+S+UNrlCoslh0ZlIHQNukKG1BegTYKEiGoBqgkMUC1ANYEBqgWoJjBAtQDVBAaoFqCawADVAlQTGKBagGoCA1QLUI300djNCZGHwgZPx3e2RkLkh9llTk3OMOeRZB8IGXwwkKKvo3b6KZ1f5czVG3ySb3yS3NDgtV6Lk3fFSG1HSmy6sMbxn657Dn6TwYjB6MN3eOYFr2RXGL40zYLPiaf9hs5ZibygcA04N5WrO3iA8aLDtzNLrvYKcPq3Od8HD/CHU+bM79twNPZjVm7aXsy5zwYzhRJfe5wo+8XYQgFb8PCEBsw461KdLdruuCWPNj8pAkt2/aM9oQH9YbkVfk/YdLUlIib+nAZ4c3ubTjTk1rUVoQFPxHdKdTa4yx0XbTd4OWZJ3d8IRpKdiHZEoQHP7oty1OPpbuVEzOL+Xu9XZd7o381jEf/PB4e6wrx6p/hoLHhFRvZkqKVfkmpmWv7HUGCAagGqCQxQLUA1OtWiwlYlpwM/q1ahkAkdOKtahULGNgsnLwP9qtX4TLVwcqOQ+HnAndJpXvJU64cdHSBpaleAY0BapSqfmGSjbhi2VI/Df8rnXwKO0DwFlTXL5/8FYO93uLXgnbwAAAAASUVORK5CYII="},"9dba":function(t,e,a){"use strict";e["a"]={watch:{loading:function(t){if(t){var e=this.$refs.wkDialog.$refs.dialog;this.loadingInstance=this.$loading({target:e})}else this.loadingInstance&&this.loadingInstance.close()}}}},a123:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAABYlAAAWJQFJUiTwAAADMUlEQVR4nO2bzUsUcRjHPzOz7ri+bbvK6q6WYWqrLmmaZIRQh/CgBOEbWdob2BsUEfTf1KFIQYgIEgIPHbvkITLZDCwvHkTSOpgv+9Jh11LL1xnnKXc+p2VmeObzfPc3v4UdHoUVTE3GHUA30AXUAR72BjPAMNAHPPEFlMjyCWX5w9RkPAg8Ayot17OWUaDVF1DCkAwg2fwbYJ+cl6XMAid8ASWsJJf9O/b+N7+WUaBaJfHMp1rzkOi5WyWx4aUqXcrUZPwre2e33y4zKqnbPIBHlTaQxg5AWkAaOwBpAWlSPgCHWYUWF6JEo2ZV2xhNA6eumVLLcADzPyIMPP5IeGTaDJ8tEwzl0dlzGN1lrAXDj8DQ4ITlzQOER6YZGpwwXMdwABPj3wxLSN7bcADxeNywxE6JmXDvlP8VsAOQFpDGDkBaQBo7AGkBaewApAWksQOQFpDGDkBaQBo7AGkBaewApAWksQOQvLm/MAtfQaakgnnvBbZLTX0+5zrLiETh6cMPjI/NiHhYvgJUVaGlrYyOniBpuoYrQ+PKrRA19flWqwAWr4CsbCdd16o4eChn1XFNU2nvDuLJdfH61RcrlawLoLjETdfVSrLdzr+eVxQ401yMN1fnef8YsZg1f7dbEkBDYyHNrSVo2uZPXF1DAdlunf5HoyzMRza93ii7ugc40lTaLgY521G6peaXKa/w0Hu3hhy3vot2CXYtAI83nRv3jlJ7fGebm78ok5v3a/EXZZlstppdCaC0wsvtB3UE9huTd3uc9N6pprTCa5LZn5gewKmmYi5fD5GRac72orscXOoNUdfgN6XeWkzbBHVdo62ngqojuWaV/IXmUGi9UI43L52hl59/H9/GvrIehgNoaS1jbm4JfyATb166YaGNON10AI83nRcDn1hajNLQGDBcU5maFHy/vUNi0TixaByH8x9YARKomoKqKZtfuJVaplT5j7EDkBaQxg5AWkAaOwASQ4WpyowKvJW2EGRYBfqlLQTpWx6cfA8EpW0sJjE4mRwkbge+CwtZySyJ+eGICuALKCPASSAsaWURoyTnhmHF9DisGp8/Dxxj78wUrjs+/xOOj6LaJAENaQAAAABJRU5ErkJggg=="},b07b:function(t,e,a){},e04a:function(t,e,a){"use strict";a.d(e,"h",(function(){return s})),a.d(e,"k",(function(){return i})),a.d(e,"j",(function(){return o})),a.d(e,"i",(function(){return r})),a.d(e,"g",(function(){return c})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return d})),a.d(e,"f",(function(){return u})),a.d(e,"b",(function(){return p})),a.d(e,"c",(function(){return h})),a.d(e,"l",(function(){return m})),a.d(e,"a",(function(){return f})),a.d(e,"m",(function(){return b}));var n=a("b775");function s(t){return Object(n["a"])({url:"projectStatus/add",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}function i(t){return Object(n["a"])({url:"projectStatus/update",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}function o(t){return Object(n["a"])({url:"projectStatus/queryProjectStatusList",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}function r(t){return Object(n["a"])({url:"projectStatus/delete",method:"post",data:t})}function c(t){return Object(n["a"])({url:"projectEvent/queryEventList",method:"post",data:t})}function l(t){return Object(n["a"])({url:"projectEventStatus/add",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}function d(t){return Object(n["a"])({url:"projectEventStatus/remove",method:"post",data:t})}function u(t){return Object(n["a"])({url:"projectEventStatus/applicationSchemeStatusList",method:"post",data:t})}function p(t){return Object(n["a"])({url:"projectEventStatus/list",method:"post",data:t})}function h(t){return Object(n["a"])({url:"projectEventStatus/transferStatus",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}function m(t){return Object(n["a"])({url:"projectEventStatus/updateInitStatus",method:"post",data:t})}function f(t){return Object(n["a"])({url:"projectEventStatus/giveUpApplicationScheme",method:"post",data:t})}function b(t){return Object(n["a"])({url:"projectEventStatus/updateSorting",method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},data:t})}},e17e:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("b775");function s(t){return Object(n["a"])({url:"adminUser/queryDeptUserList/".concat(t),method:"post"})}},e605:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"empty",rawName:"v-empty",value:!t.canShowDetail,expression:"!canShowDetail"}],ref:"sideView",staticClass:"d-view",attrs:{"no-listener-class":t.noListenerClass,"body-style":{padding:0,height:"100%"},"xs-empty-icon":"nopermission","xs-empty-text":"暂无权限"},on:{afterEnter:t.viewAfterEnter,close:t.hideView}},[n("div",{ref:"crmDetailMain",staticClass:"detail-main no-padding"},[t.taskData?n("flexbox",{staticClass:"d-container",attrs:{direction:"column",align:"stretch"}},[n("wk-detail-header",{staticClass:"detail-header",attrs:{subtitle:t.subTitle,"page-list":t.pageList,"icon-class":"wk wk-icon-task-line",dropdowns:t.handleAuthOperations},on:{command:t.headerRightClick}},[n("div",{staticClass:"icon-name",attrs:{slot:"title"},slot:"title"},[n("img",{staticClass:"item-pic",attrs:{src:t.getIconClass(t.taskData)}}),t._v(" "),t.showEditTitle&&t.editAuth?n("wk-edit-wrap",{staticClass:"edit-wrap",on:{save:t.saveItemTitle,cancel:function(e){t.showEditTitle=!1}}},[n("el-input",{attrs:{maxlength:"100","show-word-limit":""},model:{value:t.taskData.name,callback:function(e){t.$set(t.taskData,"name",e)},expression:"taskData.name"}})],1):n("el-tooltip",{attrs:{disabled:!t.title,content:t.title,effect:"dark",placement:"top-start"}},[n("span",{staticClass:"wk-detail-header-title",on:{click:function(e){t.showEditTitle=!0}}},[t._v(t._s(t.title))])])],1)]),t._v(" "),t.labelList?n("div",{staticClass:"label"},[n("tag-view",{staticClass:"tag-view",attrs:{value:t.tagLabelList,"max-length":1/0,wrap:"wrap"}},[n("div",{staticClass:"add-tag"},[n("tag-index",{attrs:{placement:"bottom-start","task-data":t.taskData}},[t.editAuth?n("el-button",{attrs:{slot:"editIndex",type:"icon",size:"small",icon:"wk wk-icon-label-solid"},slot:"editIndex"}):t._e()],1)],1)])],1):t._e(),t._v(" "),t.editAuth?n("wk-quick-create-bar",{attrs:{list:t.activityHandle},on:{command:t.quickCreateClick}}):t._e(),t._v(" "),n("div",{staticClass:"main"},[n("div",{staticClass:"main__left left-padding",style:{height:t.calcHeight+"px"}},[t.descShow||t.childShow||t.relationShow||t.fileShow?n("div",{staticStyle:{"margin-bottom":"32px"}},[t.descShow&&t.editAuth?n("div",{staticClass:"section is-header"},[n("div",{staticClass:"section__bd description",staticStyle:{"margin-top":"0",cursor:"auto"}},[t.editDesc?[n("tinymce",{ref:"editor",staticClass:"rich-txt",attrs:{height:200,init:{menubar:!1,toolbar_sticky:!0,statusbar:!1,contextmenu:"",content_style:"p { margin: 5px 0; line-height: 1.5;}",plugins:"paste",toolbar:"paste",paste_data_images:!0,automatic_uploads:t.autoUpload}},model:{value:t.addDescriptionTextarea,callback:function(e){t.addDescriptionTextarea=e},expression:"addDescriptionTextarea"}}),t._v(" "),n("div",{staticClass:"save-cancel"},[n("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.submiteDescription,expression:"submiteDescription"}],attrs:{type:"primary"}},[t._v("保存")]),t._v(" "),n("el-button",{nativeOn:{click:function(e){return t.cancelEditDesc(e)}}},[t._v("取消")])],1)]:[n("div",{staticClass:"html-wrap"},[n("div",{ref:"descWrap",class:["desc-box",t.expand?"full-content-style":"part-content-style"],domProps:{innerHTML:t._s(t.addDescriptionTextarea)},on:{click:t.previewImg}}),t._v(" "),320===t.htmlHeght?[t.expand?t._e():n("div",{staticClass:"desc-mask"}),t._v(" "),n("div",{staticClass:"toggle-btn",on:{click:function(e){t.expand=!t.expand}}},[n("i",{staticClass:"el-icon-arrow-down el-icon--right arrow",style:{transform:t.expand?"rotate(180deg)":"none"}}),t._v("\n                        "+t._s(t.expand?"收起描述":"展开描述")+"\n                      ")])]:t._e()],2)]],2)]):t._e(),t._v(" "),t.childShow?n("div",{staticClass:"section"},[n("div",{staticClass:"section__hd"},[n("span",[t._v("子工作项")]),t._v(" "),t.editAuth?n("span",{staticClass:"line"}):t._e(),t._v(" "),t.editAuth?n("i",{staticClass:"wk wk-l-plus section-add",staticStyle:{float:"right"},on:{click:function(e){t.addSubtasks=!1}}}):t._e()]),t._v(" "),n("div",{staticClass:"section__bd"},[t.taskData.taskId?n("div",[0===t.childTask.length&&t.addSubtasks?t._e():n("div",{staticClass:"sub-task-all"},[t._l(t.childTask,(function(e,s){return n("div",{key:s,staticClass:"sub-task"},[e.showEdit?n("sub-work-item",{attrs:{name:e.name,"sub-id":e.taskId,index:s},on:{save:t.handleSave,close:function(a){t.handleCloseSub(e)}}}):n("flexbox",{class:{"is-checked-background":e.checked},staticStyle:{padding:"14px"}},[n("div",{on:{click:function(t){t.stopPropagation()}}},[n("el-checkbox",{attrs:{disabled:!t.getPermission("setChildTaskStatus")},on:{change:function(a){t.subtasksCheckbox(e,a)}},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}})],1),t._v(" "),n("img",{staticClass:"item-img",attrs:{src:a("02fe"),alt:""}}),t._v(" "),n("span",{staticClass:"sub-num"},[t._v("#"+t._s(e.num))]),t._v(" "),n("div",{staticClass:"sub-task__bd text-one-line",class:{"is-checked":e.checked}},[t._v("\n                          "+t._s(e.name)+"\n                        ")]),t._v(" "),e.stopTime?n("div",{staticClass:"bg-color task-bg-color",staticStyle:{"margin-left":"8px"}},[t._v(t._s(t._f("moment")(e.stopTime,"YYYY-MM-DD"))+" 截止")]):t._e(),t._v(" "),e.mainUser?n("xr-avatar",{staticClass:"user-img",attrs:{name:e.mainUser.realname,size:25,src:e.mainUser.img}}):t._e(),t._v(" "),n("div",{staticClass:"edit-del-dropdown"},[t.editAuth?n("el-dropdown",{attrs:{"hide-on-click":!1},on:{command:t.handleSubTask}},[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-more",staticStyle:{cursor:"pointer"}})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:{type:"update",data:e}}},[t.getPermission("updateChildTask")?n("span",[t._v("\n                                  编辑\n                                ")]):t._e()]),t._v(" "),n("el-dropdown-item",{attrs:{command:{type:"delete",data:e}}},[t.getPermission("deleteChildTask")?n("span",[t._v("\n                                  删除\n                                ")]):t._e()])],1)],1):t._e()],1)],1)],1)})),t._v(" "),t.addSubtasks?t._e():n("div",[n("sub-work-item",{on:{save:t.handleSave,close:function(e){t.addSubtasks=!0,t.console.log("4444")}}})],1)],2)]):t._e()])]):t._e(),t._v(" "),t.fileShow?n("div",{staticClass:"section"},[n("div",{staticClass:"section__hd "},[n("span",[t._v("附件")]),t._v(" "),t.editAuth?n("span",{staticClass:"line"}):t._e(),t._v(" "),t.getPermission("uploadTaskFile")?n("el-upload",{ref:"fileUpload",staticClass:"upload-file",staticStyle:{float:"right"},attrs:{"http-request":t.httpRequest,action:"https://jsonplaceholder.typicode.com/posts/",multiple:"","list-type":"picture"}},[t.editAuth?n("i",{staticClass:"wk wk-l-plus section-add",staticStyle:{float:"right"}}):t._e()]):t._e()],1),t._v(" "),n("div",{staticStyle:{"margin-top":"6px"}},[n("file-cell",{attrs:{"file-list":t.fileList,"module-id":t.id,"show-delete":t.getPermission("deleteTaskFile"),"is-exposed":!0},on:{delete:t.accessoryDeleteFun}})],1)]):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"margin-top-base "},[n("div",{staticStyle:{"font-size":"18px","font-weight":"600",color:"#172b4d"}},[t._v("活动日志")]),t._v(" "),n("div",{staticClass:"activity-title"},[t._v("\n              显示：\n              "),t._l(t.tabs,(function(e,a){return n("el-button",{key:a,attrs:{type:e.value===t.tabValue?"selected":""},on:{click:function(a){t.tabValue=e.value}}},[t._v(t._s(e.label))])}))],2),t._v(" "),"comment"===t.tabValue?n("flexbox",{directives:[{name:"loading",rawName:"v-loading",value:t.commentsLoading,expression:"commentsLoading"}],staticClass:"comment-cells",attrs:{direction:"column",align:"stretch"}},[t.replyList&&t.replyList.length>0?n("comment-list",{ref:"comment_list",attrs:{props:t.commentListProps,list:t.replyList,"show-control":t.editAuth},on:{delete:t.deleteComment,"close-other-reply":function(e){t.$refs.f_reply.toggleFocus(!0)},"query-comment":t.getCommentList}}):t._e(),t._v(" "),n("flexbox",{staticClass:"reply-comment-wrap",attrs:{align:"stretch"}},[n("xr-avatar",{staticClass:"user-img",attrs:{name:t.userInfo.realname,size:32,src:t.userInfo.img}}),t._v(" "),n("reply-comment",{ref:"f_reply",on:{toggle:t.closeOtherReply,reply:t.handleReply}})],1)],1):"activity"===t.tabValue||"hours"===t.tabValue?n("div",{staticClass:"activity-cells"},[n("activity-list",{attrs:{list:t.activityList,"hours-list":t.hoursList,type:t.tabValue}})],1):t._e()],1)]),t._v(" "),n("div",{staticClass:"main__right right-padding",style:{height:t.calcHeight+"px"}},[n("el-dropdown",{staticClass:"dropdown-status-btn",attrs:{disabled:!t.getPermission("setTaskStatus")},on:{command:t.setItemStatus}},[n("div",[n("el-button",{style:{"background-color":t.statusColor.bgColor,color:t.statusColor.color}},[t._v("\n                "+t._s(t.taskData.boardStatusName||"未开始")+"\n                "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),t._v(" "),n("el-dropdown-menu",{staticClass:"dropdown-menu",style:{padding:0===t.allStatusList.length?"0px":"auto"},attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.allStatusList,(function(t,e){return n("el-dropdown-item",{key:e,attrs:{command:t.id}},[n("span",{staticStyle:{padding:"5px"}},[n("status-tag",{attrs:{type:t.statusType,"status-name":t.statusName}})],1)])})))],1),t._v(" "),n("wk-head-section",{attrs:{label:"基础信息"}},[n("div",{staticClass:"detail-form"},t._l(t.detailList,(function(e,a){return n("wk-section-item",{key:a,attrs:{label:e.label}},["belongIterationName"===e.field?n("flexbox",{staticClass:"head-btn"},[t.showSearchIteration?n("el-autocomplete",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.editChangeSave,expression:"editChangeSave"}],staticStyle:{width:"100%"},attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"请输入迭代名称"},on:{select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item;return["btn"==a.type?n("div",{staticStyle:{color:"#0052cc"}},[t._v(t._s(a.name))]):n("div",{staticClass:"name"},[t._v(t._s(a.name))])]}}]),model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}}):n("div",{staticClass:"head-btn__bd",on:{click:function(a){t.editOpen(e.field)}}},[t.taskData.belongIterationName?n("span",[t._v(t._s(t.taskData.belongIterationName))]):n("span",{staticClass:"head-btn__text",staticStyle:{"padding-left":"0"}},[t._v("点击更改所属迭代")])])],1):"item"==e.formType?n("div",{staticClass:"head-btn text-one-line"},[t.editingObj[e.field]?n("el-select",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.editChangeSave,expression:"editChangeSave"}],staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","remote-method":t.getRelatedDemandData,loading:t.relatedDemandLoading},on:{focus:function(e){t.getRelatedDemandData("")},change:t.relatedDemandChange},model:{value:t.taskData[e.field],callback:function(a){t.$set(t.taskData,e.field,a)},expression:"taskData[item.field]"}},t._l(t.relatedDemandOptions,(function(t){return n("el-option",{key:t.taskId,attrs:{label:t.name,value:t.taskId}})}))):n("div",{staticClass:"head-btn__bd",on:{click:function(a){t.editOpen(e.field)}}},[n("span",{staticClass:"head-btn__text",staticStyle:{"padding-left":"0"}},[t._v(t._s(t.taskData.relatedDemandName||"点击更改关联需求"))])])],1):"wrongType"==e.formType?n("div",{staticClass:"head-btn text-one-line"},[t.editingObj[e.field]?n("el-select",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.editChangeSave,expression:"editChangeSave"}],staticStyle:{width:"100%"},attrs:{clearable:""},on:{change:t.wrongTypeChange},model:{value:t.taskData[e.field],callback:function(a){t.$set(t.taskData,e.field,a)},expression:"taskData[item.field]"}},t._l(t.wrongTypes,(function(t){return n("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})}))):n("div",{staticClass:"head-btn__bd",on:{click:function(a){t.editOpen(e.field)}}},[n("span",{staticClass:"head-btn__text",staticStyle:{"padding-left":"0"}},[t._v(t._s(t.taskData.wrongType?t.wrongTypes.find((function(e){return e.key==t.taskData.wrongType})).label:"点击更改缺陷"))])])],1):t._e(),t._v(" "),"projectOwnerRoleList"===e.field?n("flexbox",{staticClass:"head-btn"},[n("div",{staticClass:"head-btn__bd",staticStyle:{"padding-top":"3px","white-space":"normal"}},[n("wk-user-select",{staticStyle:{width:"100%"},attrs:{disabled:!t.editAuth,request:t.ownerListRequest,params:t.ownerListParams,props:{isList:!!t.ownerListRequest}},on:{change:t.taskUserChange,"visible-change":t.setTaskUser},model:{value:t.projectOwnerRoleList,callback:function(e){t.projectOwnerRoleList=e},expression:"projectOwnerRoleList"}},[n("flexbox",{staticClass:"head-btn",attrs:{slot:"reference"},slot:"reference"},[t.projectOwnerRoleList.length?t.projectOwnerRoleList.length?n("div",{staticStyle:{display:"flex"},on:{click:function(t){t.stopPropagation()}}},[t._l(t.ownerUserShowList,(function(e,a){return n("span",{key:a,class:["owner-list",{"owner-list-fold":t.projectOwnerRoleList.length<5}]},[n("xr-avatar",{staticClass:"user-img",attrs:{id:e.userId,name:e.realname,size:24,src:e.img}})],1)})),t._v(" "),t.projectOwnerRoleList.length>5?n("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1}},[n("el-button",{staticClass:"dropdown-btn owner-list-button"},[t._v("\n                              +"+t._s(t.projectOwnerRoleList.length-5)+"\n                            ")]),t._v(" "),n("el-dropdown-menu",{staticClass:"owner-list-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.ownerUserHideList,(function(e,a){return n("el-dropdown-item",{key:a,staticClass:"owner-list-dropdown-list"},[n("xr-avatar",{staticClass:"owner-list-dropdown-img",staticStyle:{"margin-right":"10px"},attrs:{id:e.userId,name:e.realname,size:24,src:e.img}}),t._v(" "),n("p",{staticClass:"owner-list-dropdown-text"},[t._v(t._s(e.realname)+" ")])],1)})))],1):t._e()],2):t._e():n("span",{staticClass:"head-btn__text",staticStyle:{"padding-left":"0"}},[t._v("\n                          "+t._s(t.editAuth?"点击选择团队成员":"--")+"\n                        ")])])],1)],1)]):"priority"===e.field?n("flexbox",{nativeOn:{click:function(e){t.priorityVisible=!0}}},[n("el-dropdown",{staticClass:"priority-box",attrs:{disabled:!t.getPermission("priority")},on:{command:t.changePriority}},[n("div",{staticClass:"priority-wrap"},[n("img",{staticClass:"priority-icon",attrs:{src:t.handlePriorityIcon(t.taskData.priority),alt:""}}),t._v("\n                      "+t._s(["无","低","中","高"][t.taskData.priority])+"\n                    ")]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.priorityList,(function(e,a){return n("el-dropdown-item",{key:a,attrs:{command:e.key}},[n("div",{staticClass:"priority-wrap"},[n("img",{staticClass:"priority-icon",attrs:{src:e.icon,alt:""}}),t._v(t._s(e.label)+"\n                        ")])])})))],1)],1):"estimatedManHours"===e.field?n("flexbox",{staticClass:"head-btn"},[n("span",{staticClass:"head-btn__bd"},[t.showEditWorkTime?n("wk-edit-wrap",{staticClass:"edit-wrap",on:{save:t.handleWorkTime,cancel:function(e){t.showEditWorkTime=!1}}},[n("el-input",{model:{value:t.taskData.estimatedManHours,callback:function(e){t.$set(t.taskData,"estimatedManHours",e)},expression:"taskData.estimatedManHours"}})],1):n("span",{on:{click:function(e){t.editAuth&&(t.showEditWorkTime=!0)}}},[t.taskData.estimatedManHours?n("span",[t._v(t._s(t.taskData.estimatedManHours)+"小时")]):n("span",{staticClass:"head-btn__text",staticStyle:{"padding-left":"0"}},[t._v(t._s(t.editAuth?"点击更改预估工时":"--"))])])],1)]):"progress"===e.field?n("flexbox",{staticClass:"head-btn"},[n("span",{staticClass:"head-btn__bd"},[n("div",{staticClass:"progress-wrap"},[n("el-progress",{attrs:{type:"circle","show-text":!1,width:28,"stroke-width":4,percentage:Number(t.taskData.progress||0)}}),t._v(" "),t.editProgress?n("wk-edit-wrap",{staticClass:"edit-wrap",staticStyle:{"margin-left":"5px"},on:{save:t.hideProgress,cancel:function(e){t.editProgress=!1}}},[n("el-input",{model:{value:t.taskData.progress,callback:function(e){t.$set(t.taskData,"progress",e)},expression:"taskData.progress"}})],1):n("span",{staticStyle:{"margin-left":"5px"},on:{click:function(e){t.editAuth&&(t.editProgress=!0)}}},[t._v("已完成"+t._s(t.taskData.progress||0)+"%")])],1)])]):"taskTimeList"===e.field?n("flexbox",{staticClass:"head-btn"},[n("span",{staticClass:"head-btn__bd"},[n("div",{staticClass:"record-wrap",on:{click:function(e){t.editAuth&&(t.workTimeShow=!0)}}},[n("div",{staticClass:"record-desc"},[n("span",[t._v("已记录"+t._s(t.workTimeRecord.actualHour||0)+"小时")]),t._v(" "),n("span",[t._v("剩余"+t._s(t.workTimeRecord.surplusHours||0)+"小时")])]),t._v(" "),n("el-progress",{attrs:{percentage:t.recordPercentage||0,"show-text":!1,color:"#409eff"}})],1)])]):"createUserName"===e.field?n("flexbox",{staticClass:"head-btn"},[n("span",{staticClass:"head-btn__bd",staticStyle:{"padding-top":"3px"}},[n("xr-avatar",{key:t.taskData.createUserId,attrs:{id:t.taskData.createUserId,size:26,name:t.taskData.createUserName,src:t.taskData.createUserImg}})],1)]):["updateTime","createTime"].includes(e.field)?n("flexbox",{staticClass:"head-btn"},[n("span",{staticClass:"head-btn__bd"},[t._v(t._s(t._f("moment")(t.taskData[e.field]||"--","YYYY年MM月DD日")))])]):"mainUser"===e.field?n("wk-user-select",{staticStyle:{width:"100%","margin-left":"8px"},attrs:{disabled:!t.editAuth,value:t.taskData.mainUserId,request:t.ownerListRequest,params:t.ownerListParams,props:{isList:!!t.ownerListRequest},radio:""},on:{change:t.mainUserChange}},[n("flexbox",{staticClass:"head-btn",attrs:{slot:"reference"},slot:"reference"},[t.taskData.mainUserId?n("xr-avatar",{staticClass:"user-img handle-user",attrs:{id:t.taskData.mainUserId,disabled:"",name:t.taskData.mainUserName,size:26,src:t.taskData.mainUserImg}}):n("span",{staticClass:"head-btn__text",staticStyle:{"padding-left":"0"}},[t._v("\n                      "+t._s(t.editAuth?"点击选择处理人":"--")+"\n                    ")]),t._v(" "),n("div",{staticClass:"head-btn__bd"},[t.taskData.mainUserId?n("div",{staticClass:"head-btn__bd--name",staticStyle:{"font-size":"14px"}},[t._v("\n                        "+t._s(t.taskData.mainUserName)+"\n                      ")]):t._e()]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.taskData.mainUserId&&t.editAuth,expression:"taskData.mainUserId && editAuth"}],staticClass:"el-icon-close head-btn__close",on:{click:function(e){e.stopPropagation(),t.submiteMainUser(null)}}})],1)],1):["startTime","stopTime"].includes(e.field)?n("flexbox",{staticClass:"head-btn"},[t.taskData[e.field]?t._e():n("span",{staticClass:"head-btn__text"},[t._v("\n                    "+t._s(t.editAuth?"startTime"==e.field?"点击选择开始时间":"点击选择截止时间":"--")+"\n                  ")]),t._v(" "),n("el-date-picker",{attrs:{disabled:!t.getPermission("setTaskTime",e.field),clearable:!1,"picker-options":"startTime"==e.field?t.startTimeOptions:t.stopTimeOptions,type:"date","value-format":"yyyy-MM-dd"},on:{change:function(a){t.timeChange(e.field)}},model:{value:t.taskData[e.field],callback:function(a){t.$set(t.taskData,e.field,a)},expression:"taskData[item.field]"}}),t._v(" "),n("div",{staticClass:"head-btn__bd"},[t.taskData[e.field]?n("div",{staticClass:"head-btn__bd--title",staticStyle:{"font-size":"14px"}},[t._v(t._s(t._f("moment")(t.taskData[e.field],"YYYY年MM月DD日")))]):t._e()]),t._v(" "),t.editAuth?n("i",{directives:[{name:"show",rawName:"v-show",value:t.taskData[e.field],expression:"taskData[item.field]"}],staticClass:"el-icon-close head-btn__close",on:{click:function(a){t.deleteTime(e.field)}}}):t._e()],1):t._e()],1)})))])],1)])],1):t._e()],1),t._v(" "),n("create-work-time",{attrs:{visible:t.workTimeShow,"task-data":t.taskData,"item-type":t.itemType,"rest-hours":t.workTimeRecord.surplusHours},on:{"update:visible":function(e){t.workTimeShow=e},"save-success":t.handleRefresh,close:function(e){t.workTimeShow=!1}}})],1)},s=[],i=a("2909"),o=a("b85c"),r=a("5530"),c=(a("a9e3"),a("b0c0"),a("99af"),a("4de4"),a("d3b7"),a("caad"),a("d81d"),a("14d9"),a("fb6a"),a("a4d3"),a("e01a"),a("2532"),a("159b"),a("7db0"),a("3ca3"),a("ddb0"),a("a434"),a("a535")),l=a("1658"),d=a("e04a"),u=a("130f"),p=a("da37"),h=a("8256"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"create-box"},[t.subId?n("el-checkbox",{staticClass:"checked",attrs:{disabled:!0},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}):t._e(),t._v(" "),n("img",{staticClass:"item-img",attrs:{src:a("02fe"),alt:""}}),t._v(" "),n("el-input",{ref:"subInput",staticClass:"input",attrs:{placeholder:"子工作项标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),n("div",{staticClass:"btn-group"},[n("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[t._v("保存")]),t._v(" "),n("el-button",{nativeOn:{click:function(e){return t.handleClose(e)}}},[t._v("取消")])],1)],1)},f=[],b={name:"SubWorkItem",components:{},props:{name:String,index:Number,subId:[String,Number]},data:function(){return{checked:!1,title:""}},computed:{},watch:{},created:function(){this.name&&(this.title=this.name)},mounted:function(){this.$refs.subInput.focus()},methods:{handleClose:function(){this.$emit("close")},handleConfirm:function(){this.$emit("save",{type:this.name?"edit":"add",name:this.title,subId:this.subId,index:this.index}),this.name||(this.title="")}}},k=b,g=(a("1019"),a("2877")),v=Object(g["a"])(k,m,f,!1,null,"9cb5f662",null),T=v.exports,y=a("0f6f"),C=a("787c"),w=a("88c0"),j=a("5feb"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-popover",{attrs:{placement:t.placement,width:t.popoverWidth,trigger:"click"},model:{value:t.tagShow,callback:function(e){t.tagShow=e},expression:"tagShow"}},[0==t.tagContent?a("div",{staticClass:"tag-popover-box"},[a("div",{staticClass:"tag-top"},[a("span",[t._v("选择标签")]),t._v(" "),a("span",{staticClass:"el-icon-close rt cursor-pointer",on:{click:function(e){t.tagShow=!1}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"搜索标签","prefix-icon":"el-icon-search",size:"small"},model:{value:t.tagSearch,callback:function(e){t.tagSearch=e},expression:"tagSearch"}}),t._v(" "),a("div",{staticClass:"tag-content"},t._l(t.showTagList,(function(e,n){return a("div",{key:n,staticClass:"tag-list",on:{click:function(a){t.tagSelectClick(e,n)}}},[a("i",{staticClass:"wukong wukong-black-label",style:{color:e.color}}),t._v(" "),a("span",{staticClass:"item-label"},[t._v(t._s(e.name))]),t._v(" "),e.check?a("span",{staticClass:"el-icon-check rt"}):t._e()])}))),t._v(" "),a("div",{staticClass:"tag-footer"},[a("div",[a("el-button",{staticClass:"footer-row",attrs:{type:"text"},on:{click:t.createTagClick}},[t._v("+ 创建标签")])],1),t._v(" "),a("div",[a("el-button",{staticClass:"footer-row",attrs:{type:"text"},on:{click:t.managementTag}},[t._v("+ 管理标签")])],1)])],1):1==t.tagContent||3==t.tagContent?a("new-tag",{attrs:{"new-tag-title":t.newTagTitle,"new-tag-input":t.newTagInput,"bg-color-props":t.bgColorProps},on:{changeColor:t.changeColor,close:t.tagClose,tagCreateSubmit:t.tagCreateSubmit,tagCancel:t.tagCancel,back:t.back}}):2==t.tagContent?a("editTag",{attrs:{"edit-tag-list":t.tagList},on:{back:t.back,close:t.tagClose,editBtn:t.editTagClick,deleteBtn:t.deleteBtn}}):t._e(),t._v(" "),a("span",{attrs:{slot:"reference"},on:{click:t.referenceFun},slot:"reference"},[t._t("editIndex")],2)],1)},D=[],I=(a("a15b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-tag-dialog"},[a("flexbox",{staticClass:"tag-dialog-header"},[a("div",{staticClass:"tag-dialog-header__text"},[a("span",{staticClass:"el-icon-arrow-left",on:{click:t.back}}),t._v("\n      "+t._s(t.newTagTitle)+"\n    ")]),t._v(" "),a("i",{staticClass:"el-icon-close icon-close",on:{click:t.close}})]),t._v(" "),a("div",{staticClass:"search"},[a("el-input",{attrs:{maxlength:10,placeholder:"输入标签名，最多十个字符"},model:{value:t.input,callback:function(e){t.input="string"===typeof e?e.trim():e},expression:"input"}}),t._v(" "),a("span",{staticClass:"checked-color",style:{background:t.showBgColor}})],1),t._v(" "),a("div",{staticClass:"color-box"},t._l(t.colorList,(function(e,n){return a("span",{key:n,style:{background:e},on:{click:function(a){t.changeColor(e)}}})}))),t._v(" "),a("div",{staticClass:"footer"},[a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.tagCreateSubmit,expression:"tagCreateSubmit"}],attrs:{type:"primary"}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.tagCancel}},[t._v("取消")])],1)],1)}),L=[],O={props:{newTagTitle:String,newTagInput:String,bgColorProps:String},data:function(){return{colorList:["#0052CC","#00A3BF","#DE350B","#5243AA","#00875A","#FF991F","#091E42"],input:this.newTagInput,showBgColor:""}},watch:{bgColorProps:function(t){this.showBgColor=t||"#0052CC"}},mounted:function(){this.showBgColor=this.bgColorProps||"#0052CC"},methods:{back:function(){this.$emit("back")},close:function(){this.$emit("close")},changeColor:function(t){this.$emit("changeColor",t)},tagCreateSubmit:function(){this.input?this.$emit("tagCreateSubmit",this.input,this.showBgColor):this.$message.error("请输入标签名")},tagCancel:function(){this.$emit("tagCancel")}}},x=O,A=(a("432b"),Object(g["a"])(x,I,L,!1,null,"51135a51",null)),S=A.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-tag-dialog"},[a("flexbox",{staticClass:"tag-dialog-header"},[a("div",{staticClass:"tag-dialog-header__text"},[a("span",{staticClass:"el-icon-arrow-left",on:{click:t.back}}),t._v("\n      标签管理\n    ")]),t._v(" "),a("i",{staticClass:"el-icon-close icon-close",on:{click:t.close}})]),t._v(" "),a("div",{staticClass:"search"},[a("el-input",{attrs:{maxlength:10,placeholder:"输入标签名，最多十个字符"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1),t._v(" "),a("div",{staticClass:"content"},t._l(t.list,(function(e,n){return a("div",{key:n,staticClass:"tag-list"},[a("span",{staticClass:"tag-name",style:{background:e.color?e.color:"#ccc"}},[t._v("\n        "+t._s(e.name.length>10?e.name.substring(0,10)+"...":e.name)+"\n      ")]),t._v(" "),a("div",{staticClass:"rt"},[a("span",{staticClass:"el-icon-edit",on:{click:function(a){t.editBtn(e)}}}),t._v(" "),a("span",{staticClass:"el-icon-delete",on:{click:function(a){t.deleteBtn(e)}}})])])})))],1)},P=[],F={props:{editTagList:Array},data:function(){return{searchInput:""}},computed:{list:function(){var t=this;return this.editTagList.filter((function(e){return e.name.indexOf(t.searchInput)>-1}))}},watch:{},methods:{back:function(){this.$emit("back")},close:function(){this.$emit("close")},deleteBtn:function(t){this.$emit("deleteBtn",t)},editBtn:function(t){this.$emit("editBtn",t)}}},N=F,E=(a("50cf"),Object(g["a"])(N,U,P,!1,null,"24572cac",null)),H=E.exports,B={components:{NewTag:S,EditTag:H},props:{taskData:{type:Object,default:function(){return{}}},placement:String},data:function(){return{tagShow:!1,tagContent:0,tagSearch:"",tagList:[],newTagType:"create",newTagInput:"",bgColorProps:"",editTagId:""}},computed:{showTagList:function(){for(var t=[],e=0;e<this.tagList.length;e++){var a=this.tagList[e];a.name.indexOf(this.tagSearch)>-1&&t.push(a)}return t},popoverWidth:function(){return 1==this.tagContent?330:2==this.tagContent?400:220},newTagTitle:function(){return"create"===this.newTagType?"创建新标签":"编辑标签"}},watch:{},mounted:function(){},methods:{createTagClick:function(){this.newTagType="create",this.newTagInput="",this.tagContent=1},editTagClick:function(t){this.editTagId=t.labelId,this.newTagType="update",this.tagContent=1,this.bgColorProps=t.color,this.newTagInput=t.name},managementTag:function(){this.tagContent=2},tagSelectClick:function(t,e){var a=this;if(this.$listeners.change)t.check=!t.check,this.$emit("change",this.tagList.filter((function(t){return t.check})));else{this.tagList[e].check=!t.check;var n=this.tagList.filter((function(t){return t.check}));Object(l["J"])({taskId:this.taskData.taskId,ids:n.map((function(t){return t.labelId})).join(",")}).then((function(e){if(t.check){var n=[];a.tagList.forEach((function(t){t.check&&(t.labelName=t.name,n.push(t))})),a.taskData.labelTaskList=n}else a.updateDetailList(t,"delete")})).catch((function(){t.check=!0}))}},updateDetailList:function(t,e){if(this.taskData&&this.taskData.labelTaskList){for(var a=-1,n=0;n<this.taskData.labelTaskList.length;n++){var s=this.taskData.labelTaskList[n];if(s.labelId==t.labelId){a=n;break}}a>=0&&("delete"==e?this.taskData.labelTaskList.splice(a,1):this.taskData.labelTaskList.splice(a,1,t))}},changeColor:function(t){this.bgColorProps=t},tagClose:function(){this.tagShow=!1},tagCreateSubmit:function(t,e){var a=this;"create"==this.newTagType?Object(l["a"])({name:t,color:e}).then((function(t){a.getTagList(),a.back(),a.$message.success("创建成功")})):Object(l["M"])({name:t,labelId:this.editTagId,color:e}).then((function(n){var s,i=Object(o["a"])(a.tagList);try{for(i.s();!(s=i.n()).done;){var r=s.value;r.labelId==a.editTagId&&(r.name=t,r.color=e,r.labelName=r.name,a.updateDetailList(r,"update"))}}catch(c){i.e(c)}finally{i.f()}a.tagContent=2}))},tagCancel:function(){"create"==this.newTagType?(this.tagClose(),this.$message.info("已取消创建")):this.tagContent=2},back:function(){1==this.tagContent?this.tagContent="create"==this.newTagType?0:2:2==this.tagContent&&(this.tagContent=0)},deleteBtn:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then((function(){Object(l["f"])({labelId:t.labelId}).then((function(a){for(var n in e.tagList)if(e.tagList[n].labelId==t.labelId){e.tagList.splice(n,1);break}e.$message({type:"success",message:"删除成功!"}),e.tagShow=!0})).catch((function(){e.tagShow=!0}))})).catch((function(){e.$message({type:"info",message:"已取消删除"}),e.tagShow=!0}))},getTagList:function(){var t=this;Object(l["w"])({name:""}).then((function(e){var a=e.data||[],n=[];t.tagList.length>0?n=t.tagList.filter((function(t){return t.check})).map((function(t){return t.labelId})):t.taskData&&t.taskData.labelTaskList&&(n=t.taskData.labelTaskList.map((function(t){return t.labelId})));var s,i=Object(o["a"])(a);try{for(i.s();!(s=i.n()).done;){var r=s.value;r.check=n.includes(r.labelId)}}catch(c){i.e(c)}finally{i.f()}t.tagList=a})).catch((function(){}))},referenceFun:function(){this.tagContent=0,this.tagList&&!this.tagList.length&&this.getTagList()}}},R=B,W=(a("5a4a"),Object(g["a"])(R,_,D,!1,null,"b0bb533a",null)),q=W.exports,$=a("02c0"),V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t.dialogVisible?a("el-dialog",{ref:"wkDialog",attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:t.dialogVisible,title:"添加工时",width:"800px","custom-class":"no-padding-dialog"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[a("div",{staticClass:"main"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"150px"}},t._l(t.fieldList,(function(e,n){return a("el-form-item",{key:n,style:{width:e.width},attrs:{label:e.label,prop:e.field}},["item"==e.type?a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{disabled:e.disable,"fetch-suggestions":t.querySearchAsync,placeholder:e.placeholder},on:{select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[a("div",{staticClass:"name"},[t._v(t._s(n.name))])]}}]),model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}}):"user"==e.type?a("wk-user-select",{staticStyle:{width:"100%"},attrs:{disabled:e.disable,props:t.userSelectProps,radio:""},model:{value:t.ruleForm[e.field],callback:function(a){t.$set(t.ruleForm,e.field,a)},expression:"ruleForm[item.field]"}}):"date"==e.type?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm",placeholder:e.placeholder},model:{value:t.ruleForm[e.field],callback:function(a){t.$set(t.ruleForm,e.field,a)},expression:"ruleForm[item.field]"}}):"textarea"==e.type?a("el-input",{attrs:{type:"textarea",placeholder:e.placeholder},model:{value:t.ruleForm[e.field],callback:function(a){t.$set(t.ruleForm,e.field,a)},expression:"ruleForm[item.field]"}}):"time"==e.type?a("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.placeholder},on:{change:function(a){t.handleChange(a,e.field)}},model:{value:t.ruleForm[e.field],callback:function(a){t.$set(t.ruleForm,e.field,a)},expression:"ruleForm[item.field]"}},[a("el-button",{attrs:{slot:"append",type:"text"},slot:"append"},[t._v("小时")])],1):t._e()],1)}))),t._v(" "),a("div",{staticClass:"btn-wrap",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.handleConfirm,expression:"handleConfirm"}],attrs:{type:"primary"}},[t._v("保存")]),t._v(" "),a("el-button",{nativeOn:{click:function(e){return t.handleClose(e)}}},[t._v("取消")])],1)],1)]):t._e()],1)},M=[],Y=a("5c0a"),J=a("9dba"),G=a("2f62"),z={name:"CreateWorkTime",components:{WkUserSelect:Y["a"]},mixins:[J["a"]],props:{visible:{type:Boolean,required:!0,default:!1},taskData:{type:Object,default:function(){return{}}},itemType:String,restHours:[String,Number]},data:function(){return{dialogVisible:!1,loading:!1,fieldList:[{type:"time",label:"实际投入时长",field:"actualHour",placeholder:"0",width:"48%"},{type:"time",label:"剩余工时",field:"surplusHours",placeholder:"0",width:"48%"}],ruleForm:{taskId:"",actualHour:"",surplusHours:""},rules:{actualHour:[{required:!0,message:"请输入实际投入时长",trigger:"blur"}]},selectedUserIds:[],selectUserList:[],currentItem:"",itemName:""}},computed:Object(r["a"])(Object(r["a"])({},Object(G["b"])(["userInfo"])),{},{userSelectProps:function(){return{request:c["u"],params:{projectId:this.$route.params.id},isList:!0}}}),watch:{visible:{handler:function(t){t&&this.taskData.taskId&&(this.itemName=this.taskData.name,this.ruleForm.taskId=this.taskData.taskId,this.fieldList[1].placeholder=this.restHours,this.ruleForm.actualHour="",this.ruleForm.surplusHours=""),this.dialogVisible=t},immediate:!0}},methods:{handleClose:function(){this.dialogVisible=!1,this.$emit("update:visible",!1),this.$emit("close")},handleChange:function(t,e){"actualHour"==e&&(!this.restHours||t>=this.restHours?this.fieldList[1].placeholder=0:this.fieldList[1].placeholder=this.restHours-t)},querySearchAsync:function(t,e){var a=this;if(t){var n={name:t,projectId:this.$route.params.id,type:"",pageType:0};Object(l["R"])(n).then((function(n){var s=n.data.list,i=t?s.filter(a.createStateFilter(t)):s;e(i)})).catch((function(){e([])}))}else e([])},createStateFilter:function(t){return function(e){return 0===e.name.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.currentItem=t,this.itemName=t.name},handleConfirm:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(e){t.loading=!0;var a=Object(r["a"])({companyId:t.userInfo.companyId},t.ruleForm);a.surplusHours=a.surplusHours||t.fieldList[1].placeholder,Object(l["b"])(a).then((function(e){t.$message.success("操作成功"),t.$emit("save-success"),t.loading=!1})).catch((function(){t.loading=!1}))}}))}}},K=z,X=(a("2796"),Object(g["a"])(K,V,M,!1,null,"070ca48c",null)),Q=X.exports,Z=a("1557"),tt=a("deea"),et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-list"},t._l(t.list,(function(e,n){return a("div",{key:n,staticClass:"comment-list-item"},[a("div",{staticClass:"parent-reply reply"},[a("div",{staticClass:"user-info"},[a("xr-avatar",{staticClass:"user-img",attrs:{id:e.user.userId,name:e.user.realname,size:32,src:e.user.img,disabled:!1}}),t._v(" "),a("div",{staticClass:"user-info__bd"},[a("span",{staticClass:"user"},[t._v(t._s(e.user.realname))]),t._v(" "),a("span",{staticClass:"time"},[t._v("\n            "+t._s(t._f("formatTime")(e.createTime))+"\n          ")])])],1),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),a("div",{staticClass:"control"},[a("el-button",{staticClass:"reply-btn",attrs:{type:"text"},on:{click:function(e){t.handleToReply(n)}}},[a("i",{staticClass:"wk wk-icon-message-line"}),t._v("\n          回复\n        ")]),t._v(" "),a("el-button",{staticClass:"delete-btn",attrs:{type:"text"},on:{click:function(a){t.handleToDelete(e,n)}}},[a("i",{staticClass:"wk wk-icon-bin"}),t._v("\n          删除\n        ")])],1),t._v(" "),t.replyIndex===String(n)?a("reply-comment",{on:{reply:function(a){t.handleReply(a,e)},close:function(e){t.replyIndex=null}}}):t._e()],1),t._v(" "),e.childCommentList&&e.childCommentList.length>0?t._l(e.childCommentList,(function(e,s){return a("div",{key:s,staticClass:"child-reply-list"},[a("div",{staticClass:"child-reply reply"},[a("div",{staticClass:"user-info"},[a("xr-avatar",{staticClass:"user-img",attrs:{id:e.user.userId,name:e.user.realname,size:34,src:e.user.img,disabled:!1}}),t._v(" "),a("div",{staticClass:"user-info__bd"},[a("span",[t._v("\n                "+t._s(e.user.realname)+"\n              ")]),t._v(" "),a("span",{staticClass:"time"},[t._v("\n                "+t._s(e.createTime)+"\n              ")])])],1),t._v(" "),a("div",{staticClass:"child-content"},[a("span",[t._v("\n              回复 @"+t._s(e.replyUser.realname)+"：\n            ")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(e.content))])]),t._v(" "),a("div",{staticClass:"control"},[a("el-button",{staticClass:"reply-btn",attrs:{type:"text"},on:{click:function(e){t.handleToReply(n,s)}}},[a("i",{staticClass:"wk wk-icon-message-line"}),t._v("\n              回复\n            ")]),t._v(" "),a("el-button",{staticClass:"delete-btn",attrs:{type:"text"},on:{click:function(a){t.handleToDelete(e,n,s)}}},[a("i",{staticClass:"wk wk-icon-bin"}),t._v("\n              删除\n            ")])],1),t._v(" "),t.replyIndex===n+"-"+s?a("reply-comment",{directives:[{name:"loading",rawName:"v-loading",value:t.commentLoading,expression:"commentLoading"}],on:{reply:function(a){t.handleReply(a,e)},close:function(e){t.replyIndex=null}}}):t._e()],1)])})):t._e()],2)})))},at=[],nt=a("74fc"),st=a("5e38"),it=a.n(st),ot=a("8ed6"),rt=a("ed08"),ct={addRequest:null,addParams:null,replyKey:"pid",replyValueKey:"userId",deleteRequest:null,deleteParams:null},lt={name:"CommentList",components:{ReplyComment:nt["a"]},filters:{formatTime:function(t){return Object(rt["g"])(t)}},props:{props:{type:Object,default:function(){return{}}},list:{type:Array,required:!0},showControl:{type:Boolean,default:!0}},data:function(){return{replyIndex:null,commentLoading:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(G["b"])(["userInfo"])),{},{config:function(){return Object(ot["a"])(Object(r["a"])({},ct),this.props||{})}}),methods:{handleToReply:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="".concat(t).concat(null!==e?"-"+e:"");this.$emit("close-other-reply"),a!==this.replyIndex&&(this.replyIndex=a)},closeReply:function(){this.replyIndex=null},handleReply:function(t,e){var a=this,n={content:it()(t)},s=null,i=this.replyIndex.split("-"),o=this.list[i[0]];i[1]&&(s=o.childCommentList[i[1]]),o&&(n.mainId=o.commentId,n[this.config.replyKey]=this.getReplyValue(o,this.config.replyValueKey)),s&&(n[this.config.replyKey]=this.getReplyValue(s,this.config.replyValueKey)),this.config.addRequest(Object(r["a"])(Object(r["a"])({},n),this.config.addParams||{})).then((function(t){t.data.user={userId:a.userInfo.userId,realname:a.userInfo.realname,img:a.userInfo.img},t.data.replyUser=s?s.user:o.user,a.list[i[0]].childCommentList.push(t.data),a.replyIndex=null,a.commentLoading=!1})).catch((function(){a.commentLoading=!1}))},getReplyValue:function(t,e){if(e.indexOf(".")<0)return t[e];for(var a=e.split("."),n=t,s=0;s<a.length;s++)if(n=n[a[s]],void 0===n)return"";return n},handleToDelete:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.config.deleteRequest(Object(r["a"])({commentId:t.commentId},a.config.deleteParams||{})).then((function(t){a.$message({type:"success",message:"删除成功!"}),n>=0?a.list[e].childCommentList.splice(n,1):a.$emit("delete",e)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))}}},dt=lt,ut=(a("2a91"),Object(g["a"])(dt,et,at,!1,null,"763147b0",null)),pt=ut.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-list"},t._l("activity"===t.type?t.list:t.hoursList,(function(e,n){return a("div",{key:n,staticClass:"comment-list-item"},[a("div",{staticClass:"parent-reply reply"},[a("div",{staticClass:"user-info"},[a("xr-avatar",{staticClass:"user-img",attrs:{id:e.userId,name:e.realname,size:32,src:e.img,disabled:!1}}),t._v(" "),a("div",{staticClass:"user-info__bd"},[a("span",{staticClass:"user"},[t._v(t._s(e.realname))]),t._v(" "),a("span",{staticClass:"time"},[t._v("\n            "+t._s(e.createTime)+"\n          ")])])],1),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(e.content))])])])})))},mt=[],ft={name:"CommentList",components:{},filters:{},props:{list:{type:Array,required:!0},hoursList:{type:Array,default:function(){return[]}},type:{type:String,required:!0}},data:function(){return{}},methods:{}},bt=ft,kt=(a("86906"),Object(g["a"])(bt,ht,mt,!1,null,"10a136fa",null)),gt=kt.exports,vt=a("c1df"),Tt=a.n(vt),yt=a("6651"),Ct={name:"ItemDetail",components:{SlideView:u["a"],WkDetailHeader:p["a"],Tinymce:h["a"],TagIndex:q,SubWorkItem:T,FileCell:tt["a"],WkUserSelect:Y["a"],CommentList:pt,ActivityList:gt,ReplyComment:nt["a"],WkHeadSection:y["a"],WkSectionItem:C["a"],WkEditWrap:w["a"],TagView:j["a"],WkQuickCreateBar:$["a"],CreateWorkTime:Q,StatusTag:Z["a"]},props:{id:[String,Number],detailIndex:Number,detailSection:Number,noListenerClass:{type:Array,default:function(){return["el-table__body"]}},pageList:Array,projectAuth:{type:Object,default:function(){return null}}},data:function(){var t=this;return{loading:null,projectDetail:null,canShowDetail:!0,ownerUserUnfold:!1,showSearchIteration:!1,currentItem:"",itemName:"",priorityVisible:!1,priorityList:yt["f"],startTimeOptions:{disabledDate:function(e){return!(!t.taskData||!t.taskData.stopTime)&&Tt()(e).isAfter(t.taskData.stopTime)}},stopTimeOptions:{disabledDate:function(e){return!(!t.taskData||!t.taskData.startTime)&&Tt()(e).isBefore(t.taskData.startTime)}},addSubtasks:!0,addDescriptionShow:!1,expand:!1,autoUpload:!1,addDescriptionTextarea:"",htmlHeght:0,subTaskDoneNum:0,allData:{},commentsLoading:!1,subTaskID:null,taskData:null,activityList:[],hoursList:[],fileList:[],replyList:[],tabValue:"comment",showEditTitle:!1,descShow:!1,editDesc:!1,childShow:!1,wikiShow:!1,fileShow:!1,workTimeShow:!1,editProgress:!1,childTask:[],handleOperations:[{command:"delete",name:"删除",icon:""}],showEditWorkTime:!1,workTimeRecord:{},itemType:"",allStatusList:[],calcHeight:600,relatedDemandLoading:!1,relatedDemandOptions:[],wrongTypes:[{label:"功能缺陷",key:1},{label:"UI界面问题",key:2},{label:"易用性问题",key:3},{label:"安全问题",key:4},{label:"性能问题",key:5},{label:"代码错误",key:6}],editingObj:{relatedDemandId:!1,wrongType:!1},projectOwnerRoleList:[]}},computed:Object(r["a"])(Object(r["a"])({},Object(G["b"])(["userInfo"])),{},{isWorkbench:function(){return"workbench"===this.$route.name},projectId:function(){var t;return null===(t=this.taskData)||void 0===t?void 0:t.projectId},priority:function(){return this.getPriorityColor(this.taskData.priority)},title:function(){return this.taskData.name},subTitle:function(){return"".concat(this.taskData.createUserName,"创建于").concat(this.taskData.createTime)},isAgileProject:function(){var t;return 2==(null===(t=this.taskData)||void 0===t?void 0:t.projectType)},activityHandle:function(){var t=[{command:"desc",icon:"wk wk-icon-edit-des",label:"编辑描述",auth:"oa.taskExamine"},{command:"child",icon:"wk wk-icon-add-sub",label:"添加子工作项",auth:"crm.contacts.save"},{command:"file",icon:"wk wk-icon-file",label:"上传附件",auth:"crm.contacts.save"},{command:"worktime",icon:"wk wk-icon-time",label:"添加工时",auth:"crm.contacts.save"}];return this.isAgileProject?t:t.filter((function(t){return["desc","relation","file"].includes(t.command)}))},detailList:function(){var t,e=[{label:"所属迭代",formType:"follow",field:"belongIterationName"},{label:"关联需求",formType:"item",field:"relatedDemandId"},{label:"缺陷类型",formType:"wrongType",field:"wrongType"},{label:"处理人",formType:"priority",field:"mainUser"},{label:"优先级",formType:"priority",field:"priority"},{label:"创建者",formType:"createUser",field:"createUserName"},{label:"开始时间",formType:"date",field:"startTime"},{label:"截止时间",formType:"date",field:"stopTime"},{label:"团队成员",formType:"memeber",field:"projectOwnerRoleList"},{label:"进度",formType:"progress",field:"progress"},{label:"预估工时",formType:"futureTime",field:"estimatedManHours"},{label:"工时记录",formType:"timeRecord",field:"taskTimeList"},{label:"更新时间",formType:"date",field:"updateTime"},{label:"创建时间",formType:"date",field:"createTime"}];return this.isAgileProject?4===(null===(t=this.taskData)||void 0===t?void 0:t.type)?e:e.filter((function(t){return!["item","wrongType"].includes(t.formType)})):e.filter((function(t){return!["item","wrongType","follow","progress","futureTime","timeRecord"].includes(t.formType)}))},statusColor:function(){return["",{color:"#0052CC",bgColor:"#DEEBFF"},{color:"#EC8205",bgColor:"#FFEACF"},{color:"#006644",bgColor:"#E3FCEF"}][this.taskData.status]},recordPercentage:function(){return this.workTimeRecord.actualHour/(this.workTimeRecord.actualHour+this.workTimeRecord.surplusHours)*100},ownerListRequest:function(){return this.projectId?c["u"]:null},ownerListParams:function(){return{projectId:this.projectId}},labelList:function(){return this.taskData?this.taskData.labelTaskList||[]:null},tagLabelList:function(){return(this.labelList||[]).map((function(t){return{name:t.name,value:t.color?t.color:"#ccc"}}))},relatedData:function(){var t=0;for(var e in this.allData)t+=this.allData[e].length;return t},commentListProps:function(){return{addRequest:l["E"],addParams:{typeId:this.taskData?this.taskData.taskId:"",type:"1"},replyKey:"pid",replyValueKey:"userId",deleteRequest:l["d"],deleteParams:null}},editAuth:function(){var t,e;return this.isWorkbench?(null===(t=this.projectAuth)||void 0===t||null===(e=t.coordination)||void 0===e?void 0:e.editMatters)||!1:this.$auth("coordination.editMatters","PM")},delAuth:function(){var t,e;return this.isWorkbench?(null===(t=this.projectAuth)||void 0===t||null===(e=t.coordination)||void 0===e?void 0:e.deletMatters)||!1:this.$auth("coordination.deletMatters","PM")},handleAuthOperations:function(){return this.delAuth?this.handleOperations:[]},tabs:function(){var t=[{label:"评论",value:"comment"},{label:"活动",value:"activity"}];return this.projectDetail&&2==this.projectDetail.type&&t.push({label:"工时日志",value:"hours"}),t},ownerUserShowList:function(){var t=this.projectDetail.projectOwnerRoleList||[];return t.length>0?t.slice(0,5):t},ownerUserHideList:function(){var t=this.projectDetail.projectOwnerRoleList||[];return t.length>0?t.slice(5):t}}),watch:{id:function(t){this.initInfo(),this.getDetail(),this.getCommentList(),this.getActivityList()},tabValue:function(){this.getActivityList()}},mounted:function(){var t=this;this.calcHeight=document.documentElement.clientHeight-165,window.onresize=function(){t.calcHeight=document.documentElement.clientHeight-165}},beforeDestroy:function(){},methods:{getProjectDetail:function(){var t=this;this.loading=!0,Object(c["r"])({projectId:this.projectId?this.projectId:this.$route.params.id,taskId:this.id}).then((function(e){t.projectDetail=e.data||{},t.projectOwnerRoleList=e.data.projectOwnerRoleList.map((function(t){return t.userId}))||[],t.loading=!1})).catch((function(){t.loading=!1}))},viewAfterEnter:function(){this.id&&(this.getDetail(),this.getCommentList(),this.getActivityList())},handleUpdateParentList:function(){this.$emit("update-list")},initInfo:function(){this.taskData=null,this.itemType="",this.subTaskDoneNum=0,this.addDescriptionShow=!1,this.priorityVisible=!1,this.addSubtasks=!0,this.addDescriptionTextarea="",this.allData={business:[],contacts:[],contract:[],customer:[],receivables:[]},this.activityList=[],this.fileList=[],this.replyList=[]},getDetail:function(){var t=this;this.loading=!0,Object(l["Q"])({taskId:this.id}).then((function(e){var a,n=e.data||{};n.checked=3==n.status,null!==(a=n.childTaskList)&&void 0!==a&&a.length&&(t.childTask=n.childTaskList.map((function(t){return 3==t.status?t.checked=!0:t.checked=!1,t})),t.childShow=!0),t.fileList=n.file||[],t.fileList.length&&(t.fileShow=!0),n.description&&(t.descShow=!0);var s,i=0,r=n.taskTimeList,c=Object(o["a"])(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;i+=l.actualHour}}catch(d){c.e(d)}finally{c.f()}t.workTimeRecord={actualHour:i,surplusHours:r.length?r[r.length-1].surplusHours:0},t.itemType=["Require","Task","Defects"][n.type-2],t.allData={business:(n.businessList||[]).map((function(t){return t.id&&(t.businessId=t.id),t})),contacts:(n.contactsList||[]).map((function(t){return t.id&&(t.contactsId=t.id),t})),contract:(n.contractList||[]).map((function(t){return t.id&&(t.contractId=t.id),t})),customer:(n.customerList||[]).map((function(t){return t.id&&(t.customerId=t.id),t})),receivables:(n.receivablesList||[]).map((function(t){return t.id&&(t.receivablesId=t.id,t.name=t.customerName),t}))},t.taskData=n,n.relatedDemandId&&(t.relatedDemandOptions=[{name:n.relatedDemandName,taskId:n.relatedDemandId}]),t.getAllStatus(),t.getProjectDetail(),t.loading=!1,t.$nextTick((function(){t.autoUpload=!0})),n.description&&t.updateDescHeight(n.description)})).catch((function(e){t.loading=!1,e&&3007==e.code?t.canShowDetail=!1:t.closeBtn()}))},updateDescHeight:function(t){var e=this;this.$nextTick((function(){e.addDescriptionTextarea=t,setTimeout((function(){var a;t.includes("<img")?document.querySelectorAll(".desc-box img").forEach((function(t){t.onload=function(){e.htmlHeght=e.$refs.descWrap.offsetHeight}})):e.htmlHeght=null===(a=e.$refs.descWrap)||void 0===a?void 0:a.offsetHeight}),0)}))},saveItemTitle:function(){var t=this;this.showEditTitle=!1;var e={name:this.taskData.name,taskId:this.taskData.taskId};Object(l["H"])(e).then((function(e){t.$message.success("操作成功"),t.handleUpdateParentList()})).catch((function(){}))},getAllStatus:function(){var t=this,e={eventId:this.taskData.eventId,projectId:this.projectId};Object(d["b"])(e).then((function(e){t.allStatusList=e.data||[]}))},handleCloseSub:function(t){this.$set(t,"showEdit",!1)},hideProgress:function(){var t=this;this.editProgress=!1;var e={taskId:this.taskData.taskId,progress:this.taskData.progress};Object(l["Z"])(e).then((function(){t.$message.success("操作成功"),t.handleUpdateParentList(),t.getActivityList()})).catch((function(){t.$message.success("操作失败")}))},getRelatedDemandData:function(t){var e=this,a={name:t,projectId:this.projectId,pageType:0,type:2};this.relatedDemandLoading=!0,Object(l["R"])(a).then((function(t){var a=t.data.list||[];if(e.taskData.relatedDemandId){var n=a.find((function(t){return t.taskId===e.taskData.relatedDemandId}));n||a.push({name:e.taskData.relatedDemandName,taskId:e.taskData.relatedDemandId})}e.relatedDemandOptions=a,e.relatedDemandLoading=!1})).catch((function(){e.relatedDemandLoading=!1}))},handleSave:function(t){var e=this,a={companyId:this.userInfo.companyId,type:yt["e"][this.itemType],projectId:this.projectId,name:t.name,pid:this.taskData.taskId};"edit"==t.type&&(a.taskId=t.subId);var n={add:l["ab"],edit:l["qb"]}[t.type];n(a).then((function(a){var n="edit"==t.type?"编辑子工作项成功":"添加子工作项成功";"edit"==t.type&&(e.childTask[t.index].showEdit=!1),e.$message.success(n),e.getChildTask()})).catch((function(){}))},getChildTask:function(){var t=this,e={taskId:this.id,pageType:0,type:3};Object(l["S"])(e).then((function(e){t.childTask=(e.data.list||[]).map((function(e){return 3==e.status?(e.checked=!0,t.subTaskDoneNum++):e.checked=!1,e})),t.childTask.length&&(t.childShow=!0)})).catch((function(){}))},handlePriorityIcon:function(t){return Object(yt["c"])(t)},querySearchAsync:function(t,e){var a=this,n=this.taskData.belongIterationName?[{type:"btn",name:"移出迭代"}]:[];if(t){var s={name:t,projectId:this.projectId,type:0,pageType:0};Object(l["T"])(s).then((function(s){var o=s.data.list,r=t?o.filter(a.createStateFilter(t)):o;e([].concat(n,Object(i["a"])(r)))})).catch((function(){e([].concat(n))}))}else e([].concat(n))},createStateFilter:function(t){return function(e){return 0===e.name.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){var e=this;if("btn"==t.type){var a={taskIds:[this.taskData.taskId],belongIterationId:""};Object(l["D"])(a).then((function(t){e.currentItem="",e.itemName="",e.taskData.belongIterationName="",e.showSearchIteration=!1,e.getDetail(),e.handleUpdateParentList()})).catch((function(){}))}else{var n={taskIds:[this.taskData.taskId],belongIterationId:t.taskId};Object(l["D"])(n).then((function(a){e.currentItem=t,e.itemName=t.name,e.taskData.belongIterationName=t.name,e.showSearchIteration=!1,e.getDetail(),e.handleUpdateParentList()})).catch((function(){}))}},handleWorkTime:function(){var t=this;this.showEditWorkTime=!1;var e={taskId:this.taskData.taskId,estimatedManHours:this.taskData.estimatedManHours};Object(l["X"])(e).then((function(){t.$message.success("操作成功"),t.handleUpdateParentList(),t.getActivityList()})).catch((function(){t.$message.success("操作失败")}))},handleRefresh:function(){this.workTimeShow=!1,this.getDetail(),this.getActivityList()},headerRightClick:function(t){var e=this;"delete"==t&&this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={taskId:e.id};Object(l["N"])(t).then((function(t){e.$message({type:"success",message:"删除成功"}),e.hideView(),e.handleUpdateParentList()})).catch((function(){}))})).catch((function(){}))},quickCreateClick:function(t){var e=this;switch(t){case"desc":this.addDescriptionShow=!0,this.addDescriptionTextarea=this.taskData.description,this.descShow=!0,this.editDesc=!0;break;case"child":this.childShow=!0,this.$nextTick((function(){e.addSubtasks=!1}));break;case"wiki":this.wikiShow=!0;break;case"file":this.fileShow=!0,this.$nextTick((function(){e.$refs.fileUpload&&e.$refs.fileUpload.$refs["upload-inner"].$refs.input.click()}));break;case"worktime":this.workTimeShow=!0;break}},getIconClass:function(t){var e=t.pid?"sub":t.type;return{2:a("a123"),3:a("94dd"),4:a("6894")}[e]},getActivityList:function(){var t=this,e={taskId:this.id,type:1},a={taskId:this.id,type:2};this.loading=!0,Promise.all([Object(l["u"])(e),Object(l["u"])(a)]).then((function(e){t.activityList=e[0].data,t.hoursList=e[1].data,t.loading=!1})).catch((function(){t.loading=!1}))},getCommentList:function(){var t=this;Object(l["v"])({type:1,taskId:this.id}).then((function(e){t.replyList=e.data})).catch((function(){}))},setItemStatus:function(t){var e=this,a={statusId:t,taskId:this.id};Object(l["r"])(a).then((function(t){e.$message.success("设置成功"),e.getDetail(),e.handleUpdateParentList(),e.getActivityList})).catch((function(){}))},getPermission:function(t){return!!this.editAuth},closeBtn:function(){this.$emit("close")},changePriority:function(t){var e=this;Object(l["Y"])({taskId:this.id,priority:t}).then((function(a){e.taskData.priority=t,e.priorityVisible=!1,e.handleUpdateParentList(),e.getActivityList()})).catch((function(){e.$message.error("编辑失败")}))},httpRequest:function(t){var e=this;this.$wkUploadFile.upload({file:t.file,params:{batchId:this.taskData.batchId}}).then((function(t){var a=t.res;e.getDetail(),e.$message.success("上传成功"),e.refreshLog({taskIds:e.taskData.taskId,operationType:1,fileName:a.data.name})})).catch((function(){}))},accessoryDeleteFun:function(t,e){this.fileList.splice(t,1),this.refreshLog({taskIds:this.taskData.taskId,operationType:3,fileName:e.name})},refreshLog:function(t){var e=this;Object(l["L"])(t).then((function(t){e.getActivityList()})).catch((function(){}))},subtasksCheckbox:function(t,e){var a=this;e?(this.$set(t,"checked",!0),this.subTaskDoneNum++):(this.$set(t,"checked",!1),this.subTaskDoneNum--),Object(l["t"])({taskId:t.taskId,status:e?3:1}).then((function(t){a.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:a.subTaskDoneNum,allcount:a.childTask.length},index:a.detailIndex,section:a.detailSection})})).catch((function(){a.$message.error("子任务标记失败"),e?(a.$set(t,"checked",!1),a.subTaskDoneNum--):(a.$set(t,"checked",!0),a.subTaskDoneNum++)}))},mainUserChange:function(t,e){var a=e.length>0?e[0]:null;this.submiteMainUser(a)},taskUserChange:function(t,e){this.projectOwnerRoleList=t,this.projectDetail.projectOwnerRoleList=e},setTaskUser:function(){Object(l["C"])({projectId:this.projectId?this.projectId:this.$route.params.id,taskId:this.id,userIds:this.projectOwnerRoleList}).then((function(t){})).catch((function(){}))},submiteMainUser:function(t){var e=this;Object(l["F"])({taskId:this.id,mainUserId:t?t.userId:""}).then((function(t){e.getDetail(),e.handleUpdateParentList(),e.getActivityList()})).catch((function(){}))},deleteTime:function(t){this.taskData[t]="",this.timeChange(t,!0)},timeChange:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={taskId:this.id,startTime:"startTime"==t&&a?"":this.taskData.startTime||"",stopTime:"endTime"==t&&a?"":this.taskData.stopTime||""};Object(l["I"])(n).then((function(){e.$message.success("操作成功"),e.getDetail(),e.handleUpdateParentList(),e.getActivityList()}))},previewImg:function(t){var e=t.target,a=e.tagName,n=e.src;if("IMG"===a){var s=n.split("/");this.$wkPreviewFile.preview({index:0,data:[{url:n,name:s[s.length-1]}]})}},submiteDescription:function(){var t=this;Object(l["G"])({taskId:this.id,description:this.addDescriptionTextarea}).then((function(e){t.addDescriptionShow=!1,t.editDesc=!1,t.$set(t.taskData,"description",t.addDescriptionTextarea),t.updateDescHeight(t.addDescriptionTextarea),t.handleUpdateParentList(),t.$message.success("保存成功")})).catch((function(){}))},cancelEditDesc:function(){this.addDescriptionTextarea=this.taskData.description},relatedDemandChange:function(){var t=this;Object(l["s"])({taskIds:[this.id],relatedDemandId:this.taskData.relatedDemandId}).then((function(e){if(t.taskData.relatedDemandId){var a=t.relatedDemandOptions.find((function(e){return e.taskId===t.taskData.relatedDemandId}));t.$set(t.taskData,"relatedDemandId",a.taskId),t.$set(t.taskData,"relatedDemandName",a.name)}else t.$set(t.taskData,"relatedDemandId",""),t.$set(t.taskData,"relatedDemandName","");t.handleUpdateParentList()})).catch((function(){}))},wrongTypeChange:function(){var t=this;Object(l["bb"])({projectId:this.projectId,taskId:this.id,wrongType:this.taskData.wrongType}).then((function(e){t.handleUpdateParentList(),t.getActivityList()})).catch((function(){}))},editChangeSave:function(){for(var t in this.editingObj)this.editingObj[t]=!1;this.showSearchIteration=!1},editOpen:function(t){var e=this;this.editAuth&&this.$nextTick((function(){"belongIterationName"===t?e.showSearchIteration=!0:e.editingObj[t]=!0}))},handleReply:function(t){var e=this;t&&(this.commentsLoading=!0,Object(l["E"])(Object(r["a"])({content:it()(t)},this.commentListProps.addParams)).then((function(t){e.getCommentList(),e.$refs.f_reply.commentsTextarea="",e.commentsLoading=!1})).catch((function(){e.commentsLoading=!1})))},deleteComment:function(t){this.replyList.splice(t,1)},deleteSubTask:function(t){var e=this;this.$confirm("此操作将删除该任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then((function(){Object(l["N"])(t).then((function(a){var n=e.childTask;for(var s in n)if(n[s].taskId==t.taskId){n.splice(s,1);break}t.checked&&e.subTaskDoneNum--,e.$message.success("子工作项删除成功")})).catch((function(){e.$message.error("子工作项删除失败")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},editSubTask:function(t){this.subTaskID=t.taskId;var e=this.childTask;for(var a in e)e[a].taskId==t.taskId?this.$set(e[a],"showEdit",!0):this.$set(e[a],"showEdit",!1)},hideView:function(){this.$emit("close"),this.$emit("hide-view")},closeOtherReply:function(t){!t&&this.$refs.comment_list&&this.$refs.comment_list.closeReply()},handleSubTask:function(t){"update"===t.type?this.editSubTask(t.data):"delete"===t.type&&this.deleteSubTask(t.data)}}},wt=Ct,jt=(a("4213"),Object(g["a"])(wt,n,s,!1,null,"0336944d",null));e["default"]=jt.exports}}]);